(function(z,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(z=typeof globalThis<"u"?globalThis:z||self,e(z.VueMultiUploader={},z.Vue))})(this,function(z,e){"use strict";/*!
 * dush <https://github.com/tunnckoCore/dush>
 *
 * Copyright (c) Charlike Mike Reagent <@tunnckoCore> (https://i.am.charlike.online)
 * Released under the MIT license.
 */function de(){var r=Object.create(null),s={_allEvents:r,use:function(l,u){var v=l(s,u);return v||s},on:function(l,u,v){var I=s._allEvents[l]||(s._allEvents[l]=[]);function D(){s.off(l,D),u.apply(u,arguments)}D.fn=u;var M=v?D:u;return I.push(M),s},once:function(l,u){return s.on(l,u,!0),s},off:function(l,u){return u&&s._allEvents[l]?s._allEvents[l]=s._allEvents[l].filter(function(v){return v!==u&&v!==u.fn}):l?s._allEvents[l]=[]:s._allEvents=Object.create(null),s},emit:function(l){if(l!=="*"){var u=[].slice.call(arguments);(s._allEvents[l]||[]).map(function(v){v.apply(v,u.slice(1))}),(s._allEvents["*"]||[]).map(function(v){v.apply(v,u)})}return s}};return s}const X={change:"onChange","delete-item":"onDeleteItem",uploading:"onUploading",uploaded:"onUploaded","create-item":"onCreateItem","item-upload-start":"onItemUploadStart","item-upload-success":"onItemUploadSuccess","item-upload-fail":"onItemUploadFail","item-upload-end":"onItemUploadEnd","item-upload-progress":"onItemUploadProgress","invalid-file":"onInvalidFile"};function oe(r){const s=de();for(const n in X){const l=X[n];l&&r[l]&&s.on(n,r[l])}return s}var R=(r=>(r.PENDING="pending",r.UPLOADING="uploading",r.UPLOADED="uploaded",r.ERROR="error",r))(R||{});class fe extends Error{constructor(s,n,l){super(s),this.file=n,this.accepted=l,this.name="InvalidFileTypeError"}}class pe extends Error{constructor(s,n,l){super(s),this.file=n,this.maxSize=l,this.name="InvalidFileSizeError"}}function me(r,s){const n=document.createElement("input");n.id="multi-uploader-selector",n.type="file",n.accept=r.value,n.multiple=!0,n.style.display="none",n.addEventListener("change",()=>{const l=n.files;s(l),n.remove()}),n.addEventListener("change",()=>{n.remove()}),n.addEventListener("blur",()=>{n.remove()}),document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}function he(r,s,n){if(r.__dragging_events)return;let l=0;r.addEventListener("dragover",u=>{u.preventDefault()}),r.addEventListener("dragenter",u=>{u.stopPropagation(),u.preventDefault(),l++,r.classList.add(s.value)}),r.addEventListener("dragleave",u=>{u.stopPropagation(),u.preventDefault(),l--,l===0&&r.classList.remove(s.value)}),r.addEventListener("drop",async u=>{var L;u.stopPropagation(),u.preventDefault(),r.classList.remove(s.value);const v=(L=u.dataTransfer)==null?void 0:L.items,I=[],D=async y=>{const g=[];y.isDirectory?y.createReader().readEntries(N=>{N.forEach(T=>{g.push(D(T))})}):g.push(new Promise(_=>{y.file(N=>{I.push(N),_()})})),await Promise.all(g)},M=[];Array.prototype.forEach.call(v??[],y=>{const g=y.webkitGetAsEntry();g&&M.push(D(g))}),M.length&&Promise.all(M).then(()=>{n(I)})}),r.__dragging_events=!0}function se(r){var s;return r.uploadState===R.UPLOADED?r.mime?ae(r.mime):ie(r.url):r.mime?ae(r.mime):ie(((s=r.file)==null?void 0:s.name)||r.url)}function ie(r){var u;const s=r.match(/^data:image\/([a-zA-Z0-9.+-]+);base64,/);let n;return s?n=s[1]:n=((u=r.split(".").pop())==null?void 0:u.split("?").shift())||"",["png","apng","jpeg","jpg","gif","bmp","webp","avif","heic","heif"].indexOf(n.toLowerCase())!==-1}function ae(r){return r.startsWith("image/")}const F=class F{};F.alert=async s=>window.alert(s),F.confirm=async s=>new Promise(n=>{const l=confirm(s);n(l)}),F.deleteConfirm=async s=>F.confirm(s),F.confirmText=()=>"確認",F.cancelText=()=>"取消",F.deleteText=()=>"刪除";let le=F;function q(r="",s=!1){if(s){const l=(performance!=null&&performance.timeOrigin?Math.round(performance.timeOrigin):performance.timing.navigationStart)*1e5+performance.now()*100;return r+l.toString(12)+ue(4)}return r+ue(12)}function ue(r=12){const n=window.crypto;if(!n)return String(Math.floor(Math.random()*r**10));const l=new Uint8Array(r);for(let u=0;u<r;u+=65536)n.getRandomValues(l.subarray(u,u+Math.min(r-u,65536)));return Array.from(l).map(u=>u.toString(16).padStart(2,"0")).join("")}var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ye={exports:{}};(function(r,s){(function(n,l){r.exports=l()})(ge,function(){var n=1e3,l=6e4,u=36e5,v="millisecond",I="second",D="minute",M="hour",L="day",y="week",g="month",_="quarter",N="year",T="date",Z="Invalid Date",ee=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,te={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var a=["th","st","nd","rd"],i=f%100;return"["+f+(a[(i-20)%10]||a[i]||a[0])+"]"}},x=function(f,a,i){var c=String(f);return!c||c.length>=a?f:""+Array(a+1-c.length).join(i)+f},P={s:x,z:function(f){var a=-f.utcOffset(),i=Math.abs(a),c=Math.floor(i/60),o=i%60;return(a<=0?"+":"-")+x(c,2,"0")+":"+x(o,2,"0")},m:function f(a,i){if(a.date()<i.date())return-f(i,a);var c=12*(i.year()-a.year())+(i.month()-a.month()),o=a.clone().add(c,g),p=i-o<0,m=a.clone().add(c+(p?-1:1),g);return+(-(c+(i-o)/(p?o-m:m-o))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M:g,y:N,w:y,d:L,D:T,h:M,m:D,s:I,ms:v,Q:_}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return f===void 0}},H="en",j={};j[H]=te;var ne="$isDayjsObject",G=function(f){return f instanceof W||!(!f||!f[ne])},Y=function f(a,i,c){var o;if(!a)return H;if(typeof a=="string"){var p=a.toLowerCase();j[p]&&(o=p),i&&(j[p]=i,o=p);var m=a.split("-");if(!o&&m.length>1)return f(m[0])}else{var E=a.name;j[E]=a,o=E}return!c&&o&&(H=o),o||!c&&H},k=function(f,a){if(G(f))return f.clone();var i=typeof a=="object"?a:{};return i.date=f,i.args=arguments,new W(i)},w=P;w.l=Y,w.i=G,w.w=function(f,a){return k(f,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var W=function(){function f(i){this.$L=Y(i.locale,null,!0),this.parse(i),this.$x=this.$x||i.x||{},this[ne]=!0}var a=f.prototype;return a.parse=function(i){this.$d=function(c){var o=c.date,p=c.utc;if(o===null)return new Date(NaN);if(w.u(o))return new Date;if(o instanceof Date)return new Date(o);if(typeof o=="string"&&!/Z$/i.test(o)){var m=o.match(ee);if(m){var E=m[2]-1||0,b=(m[7]||"0").substring(0,3);return p?new Date(Date.UTC(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,b)):new Date(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,b)}}return new Date(o)}(i),this.init()},a.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},a.$utils=function(){return w},a.isValid=function(){return this.$d.toString()!==Z},a.isSame=function(i,c){var o=k(i);return this.startOf(c)<=o&&o<=this.endOf(c)},a.isAfter=function(i,c){return k(i)<this.startOf(c)},a.isBefore=function(i,c){return this.endOf(c)<k(i)},a.$g=function(i,c,o){return w.u(i)?this[c]:this.set(o,i)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(i,c){var o=this,p=!!w.u(c)||c,m=w.p(i),E=function(B,$){var V=w.w(o.$u?Date.UTC(o.$y,$,B):new Date(o.$y,$,B),o);return p?V:V.endOf(L)},b=function(B,$){return w.w(o.toDate()[B].apply(o.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice($)),o)},O=this.$W,t=this.$M,d=this.$D,h="set"+(this.$u?"UTC":"");switch(m){case N:return p?E(1,0):E(31,11);case g:return p?E(1,t):E(0,t+1);case y:var A=this.$locale().weekStart||0,S=(O<A?O+7:O)-A;return E(p?d-S:d+(6-S),t);case L:case T:return b(h+"Hours",0);case M:return b(h+"Minutes",1);case D:return b(h+"Seconds",2);case I:return b(h+"Milliseconds",3);default:return this.clone()}},a.endOf=function(i){return this.startOf(i,!1)},a.$set=function(i,c){var o,p=w.p(i),m="set"+(this.$u?"UTC":""),E=(o={},o[L]=m+"Date",o[T]=m+"Date",o[g]=m+"Month",o[N]=m+"FullYear",o[M]=m+"Hours",o[D]=m+"Minutes",o[I]=m+"Seconds",o[v]=m+"Milliseconds",o)[p],b=p===L?this.$D+(c-this.$W):c;if(p===g||p===N){var O=this.clone().set(T,1);O.$d[E](b),O.init(),this.$d=O.set(T,Math.min(this.$D,O.daysInMonth())).$d}else E&&this.$d[E](b);return this.init(),this},a.set=function(i,c){return this.clone().$set(i,c)},a.get=function(i){return this[w.p(i)]()},a.add=function(i,c){var o,p=this;i=Number(i);var m=w.p(c),E=function(t){var d=k(p);return w.w(d.date(d.date()+Math.round(t*i)),p)};if(m===g)return this.set(g,this.$M+i);if(m===N)return this.set(N,this.$y+i);if(m===L)return E(1);if(m===y)return E(7);var b=(o={},o[D]=l,o[M]=u,o[I]=n,o)[m]||1,O=this.$d.getTime()+i*b;return w.w(O,this)},a.subtract=function(i,c){return this.add(-1*i,c)},a.format=function(i){var c=this,o=this.$locale();if(!this.isValid())return o.invalidDate||Z;var p=i||"YYYY-MM-DDTHH:mm:ssZ",m=w.z(this),E=this.$H,b=this.$m,O=this.$M,t=o.weekdays,d=o.months,h=o.meridiem,A=function($,V,J,re){return $&&($[V]||$(c,p))||J[V].slice(0,re)},S=function($){return w.s(E%12||12,$,"0")},B=h||function($,V,J){var re=$<12?"AM":"PM";return J?re.toLowerCase():re};return p.replace(C,function($,V){return V||function(J){switch(J){case"YY":return String(c.$y).slice(-2);case"YYYY":return w.s(c.$y,4,"0");case"M":return O+1;case"MM":return w.s(O+1,2,"0");case"MMM":return A(o.monthsShort,O,d,3);case"MMMM":return A(d,O);case"D":return c.$D;case"DD":return w.s(c.$D,2,"0");case"d":return String(c.$W);case"dd":return A(o.weekdaysMin,c.$W,t,2);case"ddd":return A(o.weekdaysShort,c.$W,t,3);case"dddd":return t[c.$W];case"H":return String(E);case"HH":return w.s(E,2,"0");case"h":return S(1);case"hh":return S(2);case"a":return B(E,b,!0);case"A":return B(E,b,!1);case"m":return String(b);case"mm":return w.s(b,2,"0");case"s":return String(c.$s);case"ss":return w.s(c.$s,2,"0");case"SSS":return w.s(c.$ms,3,"0");case"Z":return m}return null}($)||m.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(i,c,o){var p,m=this,E=w.p(c),b=k(i),O=(b.utcOffset()-this.utcOffset())*l,t=this-b,d=function(){return w.m(m,b)};switch(E){case N:p=d()/12;break;case g:p=d();break;case _:p=d()/3;break;case y:p=(t-O)/6048e5;break;case L:p=(t-O)/864e5;break;case M:p=t/u;break;case D:p=t/l;break;case I:p=t/n;break;default:p=t}return o?p:w.a(p)},a.daysInMonth=function(){return this.endOf(g).$D},a.$locale=function(){return j[this.$L]},a.locale=function(i,c){if(!i)return this.$L;var o=this.clone(),p=Y(i,c,!0);return p&&(o.$L=p),o},a.clone=function(){return w.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},f}(),Q=W.prototype;return k.prototype=Q,[["$ms",v],["$s",I],["$m",D],["$H",M],["$W",L],["$M",g],["$y",N],["$D",T]].forEach(function(f){Q[f[1]]=function(a){return this.$g(a,f[0],f[1])}}),k.extend=function(f,a){return f.$i||(f(a,W,k),f.$i=!0),k},k.locale=Y,k.isDayjs=G,k.unix=function(f){return k(1e3*f)},k.en=j[H],k.Ls=j,k.p={},k})})(ye);class ve{constructor(s=1){this.maxRunning=s,this.items=[],this.currentRunning=0,this.running=!1,this.observers=[]}push(s){const n=new Promise((l,u)=>{this.items.push(()=>Promise.resolve(s()).then(l))});return this.run(),n}run(){this.running||(this.running=!0),this.pop()}async pop(){const s=this.items.shift();if(!s)return this.running=!1,Promise.resolve();if(this.currentRunning>=this.maxRunning)return this.items.unshift(s),Promise.resolve();this.currentRunning++,this.notice();try{return await s()}catch(n){throw n}finally{this.endPop()}}endPop(){this.currentRunning--,this.notice(),this.pop()}clear(){return this.items=[],this.notice(),this}isEmpty(){return this.items.length===0}get length(){return this.items.length}peek(){return this.items}observe(s,n={}){return this.observers.push({handler:s,once:n.once||!1}),()=>{this.off(s)}}once(s,n={}){return n.once=!0,this.observe(s,n)}onEnd(s,n={}){return this.observe((l,u,v)=>{u===0&&v===0&&s(l,u,v)},n)}notice(){return this.observers.forEach(s=>{s.handler(this,this.length,this.currentRunning)}),this.observers=this.observers.filter(s=>!s.once),this}off(s){return s==null?(this.observers=[],this):(this.observers=this.observers.filter(n=>n.handler!==s),this)}}function we(r=1){return new ve(r)}function $e(){return we()}function Ee(r){return r?"$el"in r?r.$el:r:null}function K(r,s){return r.key??(r.key=q()),r.uploadState??(r.uploadState=R.PENDING),r.progress??(r.progress=0),s&&Object.assign(r,s),r}function Se(r){return K(r)}function U(r){return typeof r=="function"&&(r=e.ref(r())),e.isRef(r)?r:e.ref(r)}function ce(r,s,n={}){const l=U(n.id??"vue-multi-uploader-"+q()),u=U(n.accept??""),v=U(n.maxFiles),I=U(n.maxConcurrent??2),D=U(n.maxItemSize),M=U(n.disabled??!1),L=U(n.readonly??!1),y=U(s),g=e.computed(()=>U(n.dropzone).value),_=U(n.onDragClass??"h-ondrag"),N=U(n.autoStart??!0),T=U(n.inputName??"file"),Z=U(n.headers??{}),ee=U(n.data??{});let C=U(r);C.value=C.value.map(t=>K(t,{uploadState:R.UPLOADED}));const te=$e(),x=oe(n);e.watch(I,t=>{te.maxRunning=t},{immediate:!0});function P(t,...d){return x.emit(t,...d)}function H(t,d){return x.on(t,d),()=>{x.off(t,d)}}function j(){me(u,w)}e.watch(g,()=>{const t=Ee(g.value);t&&t instanceof HTMLElement&&ne(t)},{immediate:!0});function ne(t){he(t,_,w)}function G(t){return k(Y(t))}function Y(t){const h=e.reactive(K({key:q(),url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",file:t,mime:t.type,uploadState:R.PENDING,progress:0}));return h.title=h.title||h.file.name,x.emit("create-item",h),h}function k(t){const d=e.reactive(K({key:q(),uploadState:R.PENDING,progress:0},t));if(!t.file)return t;if(Q(t.file),D.value!=null&&t.file.size>D.value){const S=new pe("File size is too large",t.file,D.value);throw P("invalid-file",S),S}const h=C.value.push(d),A=C.value[h-1];if(se(A)){const S=new FileReader;S.onload=B=>{var $;A.thumbUrl=String(($=B.target)==null?void 0:$.result)},S.readAsDataURL(t.file)}return A}function w(t){Array.prototype.forEach.call(t,Q),Array.prototype.forEach.call(t,d=>{if(!p.value)return;const h=G(d);N.value&&c(h)})}function W(t){var d;if(t instanceof XMLHttpRequest){t.abort();return}(d=t.xhr)==null||d.abort()}function Q(t){const d=E.value,h=t.name.split(".").pop();if(d.length){let A=!1;if(d.forEach(S=>{A||(S.indexOf("/")!==-1?f(S,t.type)&&(A=!0):S.toLowerCase()===(h==null?void 0:h.toLowerCase())&&(A=!0))}),!A){const S=new fe("Invalid file type",t,d);throw P("invalid-file",S),S}}}function f(t,d){const h=t.split("/"),A=d.split("/");return h[1]==="*"?h[0]===A[0]:t===d}function a(t){P("delete-item",t),C.value=C.value.filter(d=>d.key!==t.key)}async function i(){const t=[];return C.value.forEach(d=>{d.uploadState===R.PENDING&&t.push(c(d))}),Promise.allSettled(t)}async function c(t){return te.push(()=>o(t))}async function o(t){t.uploadState=R.UPLOADING,t.error=void 0;const d=new FormData;for(const S in ee.value)d.append(S,ee.value[S]);d.append(T.value,t.file);let h=new XMLHttpRequest;h.open("POST",y.value);for(const S in Z.value)h.setRequestHeader(S,Z.value[S]);return n.prepareXhr&&(h=await n.prepareXhr(h)??h),new Promise((S,B)=>{P("item-upload-start",t,h,d),h.upload.onprogress=$=>{$.lengthComputable&&(t.progress=$.loaded/$.total,P("item-upload-progress",t,$))},h.onload=()=>{if(h.status>=200&&h.status<300)try{t.uploadState=R.UPLOADED,P("item-upload-success",t,h),S(t)}catch($){console.error($),t.uploadState=R.ERROR,t.error=$,B($)}else{const $=`Upload failed with status: ${h.status}`,V=new Error($);console.error(V),t.uploadState=R.ERROR,t.error=V,B(V)}},h.onerror=()=>{const $="An error occurred during the upload.";console.error($),t.uploadState=R.ERROR,t.error=new Error($),B(t.error)},h.onloadend=()=>{P("item-upload-end",t,h)},h.send(d)}).catch(S=>(P("item-upload-fail",t,S),Promise.reject(S)))}const p=e.computed(()=>(v.value==null||C.value.length<Number(v.value))&&!b.value),m=e.computed(()=>C.value.filter(d=>d.uploadState===R.UPLOADING).length>0),E=e.computed(()=>(Array.isArray(u.value)?u.value:u.value.split(",")).map(t=>t.trim()).filter(t=>t.length>0).map(t=>t.indexOf("/")===-1&&t[0]==="."?t.substr(1):t)),b=e.computed(()=>M.value||L.value);e.watch(C,t=>{t.map(d=>{d.key=d.key||q()}),P("change",C)},{deep:!0}),e.watch(m,t=>{P(t?"uploading":"uploaded")});const O=e.computed(()=>C.value.reduce((t,d)=>(d.file&&(t+=d.file.size),t),0));return{id:l,accept:u,maxFiles:v,maxConcurrent:I,maxItemSize:D,disabled:M,readonly:L,uploadUrl:y,items:C,eventBus:x,canUpload:p,isUploading:m,acceptedTypes:E,isReadonly:b,totalSize:O,emits:P,on:H,openFileSelector:j,addFile:G,addItem:k,createItem:Y,deleteItem:a,uploadStart:i,stopItemUpload:W,isImageItem:se,isImage:ie,checkFile:Q,uploadFile:o,enqueueUploadFile:c}}const Me={class:"vue-drag-uploader__wrapper vue-drag-uploader__items"},be=e.defineComponent({__name:"MultiUploader",props:e.mergeModels({id:{},uploadUrl:{},placeholder:{},instance:{},options:{default:()=>({})}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:e.mergeModels(["update:modelValue","change","delete-item","uploading","uploaded","create-item","item-upload-start","item-upload-success","item-upload-fail","item-upload-end","item-upload-progress","invalid-file-type"],["update:modelValue"]),setup(r,{expose:s,emit:n}){const l=r,u=n,v=e.useModel(r,"modelValue"),I=e.ref(v.value);e.watch(v,()=>{I.value=v.value},{deep:!0});const D=e.useTemplateRef("uploader");l.options.dropzone=l.options.dropzone??D;const M=l.instance??ce(I,l.uploadUrl??"",l.options),{isReadonly:L,items:y}=M;e.watch(y,()=>{v.value=y.value},{deep:!0});const g=[];for(const _ in X){const N=M.on(_,(...T)=>{u(_,...T)});g.push(N)}return e.onUnmounted(()=>{g.forEach(_=>_())}),s({instance:M}),(_,N)=>(e.openBlock(),e.createElementBlock("div",{ref:"uploader",class:e.normalizeClass(["vue-drag-uploader",{"vue-drag-uploader--readonly":e.unref(L)}])},[e.renderSlot(_.$slots,"start",{items:e.unref(y),options:_.options,instance:e.reactive(e.unref(M))}),e.createElementVNode("div",Me,[e.renderSlot(_.$slots,"items",{items:e.unref(y),options:_.options,instance:e.reactive(e.unref(M))})]),e.renderSlot(_.$slots,"end",{items:e.unref(y),options:_.options,instance:e.reactive(e.unref(M))})],2))}}),De={key:1,class:"preview-img__body d-flex flex-column justify-content-center align-items-center gap-2"},_e={style:{width:"calc(var(--vmu-img-size) / 3)",height:"calc(var(--vmu-img-size) / 3)"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},ke={style:{"word-break":"break-word"}},Oe={class:"preview-img__overlay"},Ie={style:{width:"1rem",height:"1rem",fill:"white"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},Ae={key:2,class:"preview-img__progress"},Le={class:"error-message__message"},Ne=e.defineComponent({__name:"ItemCard",props:{item:{},i:{},size:{default:"150px"},isReadonly:{type:Boolean}},emits:["delete","item-click"],setup(r,{emit:s}){const n=r,l=s,u=e.computed(()=>n.item.uploadState),v=e.computed(()=>n.item.progress);function I(){n.isReadonly||l("delete",n.item)}const D=e.computed(()=>n.item.file?n.item.file.name:n.item.title?n.item.title:n.item.url.split("/").pop()),M=e.computed(()=>se(n.item));function L(y){l("item-click",n.item,n.i,y)}return(y,g)=>(e.openBlock(),e.createElementBlock("div",{class:"vue-drag-uploader-item preview-img",style:e.normalizeStyle({"--vmu-img-size":y.size}),onClick:L},[e.renderSlot(y.$slots,"it",{item:y.item},()=>{var _;return[M.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"preview-img__body",style:e.normalizeStyle({"background-image":"url("+(y.item.thumbUrl||y.item.url)+")",opacity:u.value===e.unref(R).UPLOADED?1:.5})},null,4)):e.createCommentVNode("",!0),M.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",De,[e.createElementVNode("div",null,[e.renderSlot(y.$slots,"icon",{item:y.item},()=>[(e.openBlock(),e.createElementBlock("svg",_e,g[2]||(g[2]=[e.createElementVNode("path",{d:"M320 464c8.8 0 16-7.2 16-16l0-288-80 0c-17.7 0-32-14.3-32-32l0-80L64 48c-8.8 0-16 7.2-16 16l0 384c0 8.8 7.2 16 16 16l256 0zM0 64C0 28.7 28.7 0 64 0L229.5 0c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64z"},null,-1)])))])]),e.createElementVNode("div",ke,e.toDisplayString(D.value),1)])),e.createElementVNode("div",Oe,[y.isReadonly?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("span",{key:0,class:"preview-img__remove-icon",onClick:g[0]||(g[0]=e.withModifiers(N=>I(),["prevent","stop"]))},[e.renderSlot(y.$slots,"remove-icon",{},()=>[(e.openBlock(),e.createElementBlock("svg",Ie,g[3]||(g[3]=[e.createElementVNode("path",{d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"},null,-1)])))])])),e.renderSlot(y.$slots,"extra",{item:y.item})]),u.value===e.unref(R).UPLOADING?(e.openBlock(),e.createElementBlock("div",Ae,[e.createElementVNode("div",{class:"preview-img__progress-bar",style:e.normalizeStyle({width:v.value*100+"%"})},null,4)])):e.createCommentVNode("",!0),u.value===e.unref(R).ERROR?(e.openBlock(),e.createElementBlock("div",{key:3,class:"preview-img__error-message error-message",onClick:g[1]||(g[1]=e.withModifiers(()=>{},["stop","prevent"]))},[g[4]||(g[4]=e.createElementVNode("span",{class:"error-message__notice"},"Upload fail",-1)),e.createElementVNode("span",Le,e.toDisplayString((_=y.item.error)==null?void 0:_.message),1)])):e.createCommentVNode("",!0)]})],4))}}),Re={class:"add-button__body"},Ue={class:"add-button__icon"},Ce={style:{width:"32px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},ze={class:"add-button__text"},Pe=e.defineComponent({__name:"ItemCardPlaceholder",props:{size:{default:"150px"},text:{default:""}},setup(r){return(s,n)=>(e.openBlock(),e.createElementBlock("div",{class:"vue-drag-uploader-item add-button",key:"empty",style:e.normalizeStyle({"--vmu-img-size":s.size})},[e.createElementVNode("div",Re,[e.renderSlot(s.$slots,"default",{},()=>[e.createElementVNode("div",Ue,[e.renderSlot(s.$slots,"icon",e.normalizeProps(e.guardReactiveProps({size:s.size})),()=>[(e.openBlock(),e.createElementBlock("svg",Ce,n[0]||(n[0]=[e.createElementVNode("path",{d:"M288 109.3L288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-242.7-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352l128 0c0 35.3 28.7 64 64 64s64-28.7 64-64l128 0c35.3 0 64 28.7 64 64l0 32c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64l0-32c0-35.3 28.7-64 64-64zM432 456a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"},null,-1)])))])]),e.createElementVNode("div",ze,e.toDisplayString(s.text),1)])])],4))}});z.ItemCard=Ne,z.ItemCardPlaceholder=Pe,z.MultiUploader=be,z.UploadState=R,z.createItem=Se,z.handleEvents=oe,z.uploaderEvents=X,z.useMultiUploader=ce,Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})});
