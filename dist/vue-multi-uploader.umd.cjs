(function(z,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(z=typeof globalThis<"u"?globalThis:z||self,e(z.VueMultiUploader={},z.Vue))})(this,function(z,e){"use strict";/*!
 * dush <https://github.com/tunnckoCore/dush>
 *
 * Copyright (c) Charlike Mike Reagent <@tunnckoCore> (https://i.am.charlike.online)
 * Released under the MIT license.
 */function ce(){var s=Object.create(null),r={_allEvents:s,use:function(l,d){var y=l(r,d);return y||r},on:function(l,d,y){var A=r._allEvents[l]||(r._allEvents[l]=[]);function D(){r.off(l,D),d.apply(d,arguments)}D.fn=d;var M=y?D:d;return A.push(M),r},once:function(l,d){return r.on(l,d,!0),r},off:function(l,d){return d&&r._allEvents[l]?r._allEvents[l]=r._allEvents[l].filter(function(y){return y!==d&&y!==d.fn}):l?r._allEvents[l]=[]:r._allEvents=Object.create(null),r},emit:function(l){if(l!=="*"){var d=[].slice.call(arguments);(r._allEvents[l]||[]).map(function(y){y.apply(y,d.slice(1))}),(r._allEvents["*"]||[]).map(function(y){y.apply(y,d)})}return r}};return r}const X={change:"onChange","delete-item":"onDeleteItem",uploading:"onUploading",uploaded:"onUploaded","create-item":"onCreateItem","item-upload-start":"onItemUploadStart","item-upload-success":"onItemUploadSuccess","item-upload-fail":"onItemUploadFail","item-upload-end":"onItemUploadEnd","item-upload-progress":"onItemUploadProgress","invalid-file":"onInvalidFile"};function oe(s){const r=ce();for(const n in X){const l=X[n];l&&s[l]&&r.on(n,s[l])}return r}var N=(s=>(s.PENDING="pending",s.UPLOADING="uploading",s.UPLOADED="uploaded",s.ERROR="error",s))(N||{});class de extends Error{constructor(r,n,l){super(r),this.file=n,this.accepted=l,this.name="InvalidFileTypeError"}}class fe extends Error{constructor(r,n,l){super(r),this.file=n,this.maxSize=l,this.name="InvalidFileSizeError"}}function pe(s,r){const n=document.createElement("input");n.id="multi-uploader-selector",n.type="file",n.accept=s.value,n.multiple=!0,n.style.display="none",n.addEventListener("change",()=>{const l=n.files;r(l),n.remove()}),n.addEventListener("change",()=>{n.remove()}),n.addEventListener("blur",()=>{n.remove()}),document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}function me(s,r,n){s.__dragging_events||(s.addEventListener("dragover",l=>{l.stopPropagation(),l.preventDefault(),s.classList.add(r.value)}),s.addEventListener("dragleave",l=>{l.stopPropagation(),l.preventDefault(),s.classList.remove(r.value)}),s.addEventListener("drop",async l=>{var M;l.stopPropagation(),l.preventDefault(),s.classList.remove(r.value);const d=(M=l.dataTransfer)==null?void 0:M.items,y=[],A=async k=>{const g=[];k.isDirectory?k.createReader().readEntries(_=>{_.forEach(R=>{g.push(A(R))})}):g.push(new Promise(v=>{k.file(_=>{y.push(_),v()})})),await Promise.all(g)},D=[];Array.prototype.forEach.call(d??[],k=>{const g=k.webkitGetAsEntry();g&&D.push(A(g))}),D.length&&Promise.all(D).then(()=>{n(y)})}),s.__dragging_events=!0)}function se(s){var r;return s.uploadState===N.UPLOADED?ie(s.url):ie(((r=s.file)==null?void 0:r.name)||s.url)}function ie(s){var d;const r=s.match(/^data:image\/([a-zA-Z0-9.+-]+);base64,/);let n;return r?n=r[1]:n=((d=s.split(".").pop())==null?void 0:d.split("?").shift())||"",["png","apng","jpeg","jpg","gif","bmp","webp","avif","heic","heif"].indexOf(n.toLowerCase())!==-1}const F=class F{};F.alert=async r=>window.alert(r),F.confirm=async r=>new Promise(n=>{const l=confirm(r);n(l)}),F.deleteConfirm=async r=>F.confirm(r),F.confirmText=()=>"確認",F.cancelText=()=>"取消",F.deleteText=()=>"刪除";let ae=F;function W(s="",r=!1){if(r){const l=(performance!=null&&performance.timeOrigin?Math.round(performance.timeOrigin):performance.timing.navigationStart)*1e5+performance.now()*100;return s+l.toString(12)+le(4)}return s+le(12)}function le(s=12){const n=window.crypto;if(!n)return String(Math.floor(Math.random()*s**10));const l=new Uint8Array(s);for(let d=0;d<s;d+=65536)n.getRandomValues(l.subarray(d,d+Math.min(s-d,65536)));return Array.from(l).map(d=>d.toString(16).padStart(2,"0")).join("")}var he=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ge={exports:{}};(function(s,r){(function(n,l){s.exports=l()})(he,function(){var n=1e3,l=6e4,d=36e5,y="millisecond",A="second",D="minute",M="hour",k="day",g="week",v="month",_="quarter",R="year",V="date",q="Invalid Date",ee=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,te={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var a=["th","st","nd","rd"],i=f%100;return"["+f+(a[(i-20)%10]||a[i]||a[0])+"]"}},x=function(f,a,i){var u=String(f);return!u||u.length>=a?f:""+Array(a+1-u.length).join(i)+f},P={s:x,z:function(f){var a=-f.utcOffset(),i=Math.abs(a),u=Math.floor(i/60),o=i%60;return(a<=0?"+":"-")+x(u,2,"0")+":"+x(o,2,"0")},m:function f(a,i){if(a.date()<i.date())return-f(i,a);var u=12*(i.year()-a.year())+(i.month()-a.month()),o=a.clone().add(u,v),p=i-o<0,m=a.clone().add(u+(p?-1:1),v);return+(-(u+(i-o)/(p?o-m:m-o))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M:v,y:R,w:g,d:k,D:V,h:M,m:D,s:A,ms:y,Q:_}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return f===void 0}},H="en",j={};j[H]=te;var ne="$isDayjsObject",G=function(f){return f instanceof Q||!(!f||!f[ne])},Y=function f(a,i,u){var o;if(!a)return H;if(typeof a=="string"){var p=a.toLowerCase();j[p]&&(o=p),i&&(j[p]=i,o=p);var m=a.split("-");if(!o&&m.length>1)return f(m[0])}else{var E=a.name;j[E]=a,o=E}return!u&&o&&(H=o),o||!u&&H},O=function(f,a){if(G(f))return f.clone();var i=typeof a=="object"?a:{};return i.date=f,i.args=arguments,new Q(i)},w=P;w.l=Y,w.i=G,w.w=function(f,a){return O(f,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var Q=function(){function f(i){this.$L=Y(i.locale,null,!0),this.parse(i),this.$x=this.$x||i.x||{},this[ne]=!0}var a=f.prototype;return a.parse=function(i){this.$d=function(u){var o=u.date,p=u.utc;if(o===null)return new Date(NaN);if(w.u(o))return new Date;if(o instanceof Date)return new Date(o);if(typeof o=="string"&&!/Z$/i.test(o)){var m=o.match(ee);if(m){var E=m[2]-1||0,b=(m[7]||"0").substring(0,3);return p?new Date(Date.UTC(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,b)):new Date(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,b)}}return new Date(o)}(i),this.init()},a.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},a.$utils=function(){return w},a.isValid=function(){return this.$d.toString()!==q},a.isSame=function(i,u){var o=O(i);return this.startOf(u)<=o&&o<=this.endOf(u)},a.isAfter=function(i,u){return O(i)<this.startOf(u)},a.isBefore=function(i,u){return this.endOf(u)<O(i)},a.$g=function(i,u,o){return w.u(i)?this[u]:this.set(o,i)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(i,u){var o=this,p=!!w.u(u)||u,m=w.p(i),E=function(B,$){var T=w.w(o.$u?Date.UTC(o.$y,$,B):new Date(o.$y,$,B),o);return p?T:T.endOf(k)},b=function(B,$){return w.w(o.toDate()[B].apply(o.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice($)),o)},I=this.$W,t=this.$M,c=this.$D,h="set"+(this.$u?"UTC":"");switch(m){case R:return p?E(1,0):E(31,11);case v:return p?E(1,t):E(0,t+1);case g:var L=this.$locale().weekStart||0,S=(I<L?I+7:I)-L;return E(p?c-S:c+(6-S),t);case k:case V:return b(h+"Hours",0);case M:return b(h+"Minutes",1);case D:return b(h+"Seconds",2);case A:return b(h+"Milliseconds",3);default:return this.clone()}},a.endOf=function(i){return this.startOf(i,!1)},a.$set=function(i,u){var o,p=w.p(i),m="set"+(this.$u?"UTC":""),E=(o={},o[k]=m+"Date",o[V]=m+"Date",o[v]=m+"Month",o[R]=m+"FullYear",o[M]=m+"Hours",o[D]=m+"Minutes",o[A]=m+"Seconds",o[y]=m+"Milliseconds",o)[p],b=p===k?this.$D+(u-this.$W):u;if(p===v||p===R){var I=this.clone().set(V,1);I.$d[E](b),I.init(),this.$d=I.set(V,Math.min(this.$D,I.daysInMonth())).$d}else E&&this.$d[E](b);return this.init(),this},a.set=function(i,u){return this.clone().$set(i,u)},a.get=function(i){return this[w.p(i)]()},a.add=function(i,u){var o,p=this;i=Number(i);var m=w.p(u),E=function(t){var c=O(p);return w.w(c.date(c.date()+Math.round(t*i)),p)};if(m===v)return this.set(v,this.$M+i);if(m===R)return this.set(R,this.$y+i);if(m===k)return E(1);if(m===g)return E(7);var b=(o={},o[D]=l,o[M]=d,o[A]=n,o)[m]||1,I=this.$d.getTime()+i*b;return w.w(I,this)},a.subtract=function(i,u){return this.add(-1*i,u)},a.format=function(i){var u=this,o=this.$locale();if(!this.isValid())return o.invalidDate||q;var p=i||"YYYY-MM-DDTHH:mm:ssZ",m=w.z(this),E=this.$H,b=this.$m,I=this.$M,t=o.weekdays,c=o.months,h=o.meridiem,L=function($,T,J,re){return $&&($[T]||$(u,p))||J[T].slice(0,re)},S=function($){return w.s(E%12||12,$,"0")},B=h||function($,T,J){var re=$<12?"AM":"PM";return J?re.toLowerCase():re};return p.replace(C,function($,T){return T||function(J){switch(J){case"YY":return String(u.$y).slice(-2);case"YYYY":return w.s(u.$y,4,"0");case"M":return I+1;case"MM":return w.s(I+1,2,"0");case"MMM":return L(o.monthsShort,I,c,3);case"MMMM":return L(c,I);case"D":return u.$D;case"DD":return w.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return L(o.weekdaysMin,u.$W,t,2);case"ddd":return L(o.weekdaysShort,u.$W,t,3);case"dddd":return t[u.$W];case"H":return String(E);case"HH":return w.s(E,2,"0");case"h":return S(1);case"hh":return S(2);case"a":return B(E,b,!0);case"A":return B(E,b,!1);case"m":return String(b);case"mm":return w.s(b,2,"0");case"s":return String(u.$s);case"ss":return w.s(u.$s,2,"0");case"SSS":return w.s(u.$ms,3,"0");case"Z":return m}return null}($)||m.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(i,u,o){var p,m=this,E=w.p(u),b=O(i),I=(b.utcOffset()-this.utcOffset())*l,t=this-b,c=function(){return w.m(m,b)};switch(E){case R:p=c()/12;break;case v:p=c();break;case _:p=c()/3;break;case g:p=(t-I)/6048e5;break;case k:p=(t-I)/864e5;break;case M:p=t/d;break;case D:p=t/l;break;case A:p=t/n;break;default:p=t}return o?p:w.a(p)},a.daysInMonth=function(){return this.endOf(v).$D},a.$locale=function(){return j[this.$L]},a.locale=function(i,u){if(!i)return this.$L;var o=this.clone(),p=Y(i,u,!0);return p&&(o.$L=p),o},a.clone=function(){return w.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},f}(),Z=Q.prototype;return O.prototype=Z,[["$ms",y],["$s",A],["$m",D],["$H",M],["$W",k],["$M",v],["$y",R],["$D",V]].forEach(function(f){Z[f[1]]=function(a){return this.$g(a,f[0],f[1])}}),O.extend=function(f,a){return f.$i||(f(a,Q,O),f.$i=!0),O},O.locale=Y,O.isDayjs=G,O.unix=function(f){return O(1e3*f)},O.en=j[H],O.Ls=j,O.p={},O})})(ge);class ye{constructor(r=1){this.maxRunning=r,this.items=[],this.currentRunning=0,this.running=!1,this.observers=[]}push(r){const n=new Promise((l,d)=>{this.items.push(()=>Promise.resolve(r()).then(l))});return this.run(),n}run(){this.running||(this.running=!0),this.pop()}async pop(){const r=this.items.shift();if(!r)return this.running=!1,Promise.resolve();if(this.currentRunning>=this.maxRunning)return this.items.unshift(r),Promise.resolve();this.currentRunning++,this.notice();try{return await r()}catch(n){throw n}finally{this.endPop()}}endPop(){this.currentRunning--,this.notice(),this.pop()}clear(){return this.items=[],this.notice(),this}isEmpty(){return this.items.length===0}get length(){return this.items.length}peek(){return this.items}observe(r,n={}){return this.observers.push({handler:r,once:n.once||!1}),()=>{this.off(r)}}once(r,n={}){return n.once=!0,this.observe(r,n)}onEnd(r,n={}){return this.observe((l,d,y)=>{d===0&&y===0&&r(l,d,y)},n)}notice(){return this.observers.forEach(r=>{r.handler(this,this.length,this.currentRunning)}),this.observers=this.observers.filter(r=>!r.once),this}off(r){return r==null?(this.observers=[],this):(this.observers=this.observers.filter(n=>n.handler!==r),this)}}function ve(s=1){return new ye(s)}function we(){return ve()}function $e(s){return s?"$el"in s?s.$el:s:null}function K(s,r){return s.key??(s.key=W()),s.uploadState??(s.uploadState=N.PENDING),s.progress??(s.progress=0),r&&Object.assign(s,r),s}function Ee(s){return K(s)}function U(s){return typeof s=="function"&&(s=e.ref(s())),e.isRef(s)?s:e.ref(s)}function ue(s,r,n={}){const l=U(n.id??"vue-multi-uploader-"+W()),d=U(n.accept??""),y=U(n.maxFiles),A=U(n.maxConcurrent??2),D=U(n.maxItemSize),M=U(n.disabled??!1),k=U(n.readonly??!1),g=U(r),v=e.computed(()=>U(n.dropzone).value),_=U(n.onDragClass??"h-ondrag"),R=U(n.autoStart??!0),V=U(n.inputName??"file"),q=U(n.headers??{}),ee=U(n.data??{});let C=U(s);C.value=C.value.map(t=>K(t,{uploadState:N.UPLOADED}));const te=we(),x=oe(n);e.watch(A,t=>{te.maxRunning=t},{immediate:!0});function P(t,...c){return x.emit(t,...c)}function H(t,c){return x.on(t,c),()=>{x.off(t,c)}}function j(){pe(d,w)}e.watch(v,()=>{const t=$e(v.value);t&&t instanceof HTMLElement&&ne(t)},{immediate:!0});function ne(t){me(t,_,w)}function G(t){return O(Y(t))}function Y(t){const h=e.reactive(K({key:W(),url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",file:t,uploadState:N.PENDING,progress:0}));return h.title=h.title||h.file.name,x.emit("create-item",h),h}function O(t){const c=e.reactive(K({key:W(),uploadState:N.PENDING,progress:0},t));if(!t.file)return t;if(Z(t.file),D.value!=null&&t.file.size>D.value){const S=new fe("File size is too large",t.file,D.value);throw P("invalid-file",S),S}const h=C.value.push(c),L=C.value[h-1];if(se(L)){const S=new FileReader;S.onload=B=>{var $;L.thumbUrl=String(($=B.target)==null?void 0:$.result)},S.readAsDataURL(t.file)}return L}function w(t){Array.prototype.forEach.call(t,Z),Array.prototype.forEach.call(t,c=>{if(!p.value)return;const h=G(c);R.value&&u(h)})}function Q(t){var c;if(t instanceof XMLHttpRequest){t.abort();return}(c=t.xhr)==null||c.abort()}function Z(t){const c=E.value,h=t.name.split(".").pop();if(c.length){let L=!1;if(c.forEach(S=>{L||(S.indexOf("/")!==-1?f(S,t.type)&&(L=!0):S.toLowerCase()===(h==null?void 0:h.toLowerCase())&&(L=!0))}),!L){const S=new de("Invalid file type",t,c);throw P("invalid-file",S),S}}}function f(t,c){const h=t.split("/"),L=c.split("/");return h[1]==="*"?h[0]===L[0]:t===c}function a(t){P("delete-item",t),C.value=C.value.filter(c=>c.key!==t.key)}async function i(){const t=[];return C.value.forEach(c=>{c.uploadState===N.PENDING&&t.push(u(c))}),Promise.allSettled(t)}async function u(t){return te.push(()=>o(t))}async function o(t){t.uploadState=N.UPLOADING,t.error=void 0;const c=new FormData;for(const S in ee.value)c.append(S,ee.value[S]);c.append(V.value,t.file);let h=new XMLHttpRequest;h.open("POST",g.value);for(const S in q.value)h.setRequestHeader(S,q.value[S]);return n.prepareXhr&&(h=await n.prepareXhr(h)??h),new Promise((S,B)=>{P("item-upload-start",t,h,c),h.upload.onprogress=$=>{$.lengthComputable&&(t.progress=$.loaded/$.total,P("item-upload-progress",t,$))},h.onload=()=>{if(h.status>=200&&h.status<300)try{t.uploadState=N.UPLOADED,P("item-upload-success",t,h),S(t)}catch($){console.error($),t.uploadState=N.ERROR,t.error=$,B($)}else{const $=`Upload failed with status: ${h.status}`,T=new Error($);console.error(T),t.uploadState=N.ERROR,t.error=T,B(T)}},h.onerror=()=>{const $="An error occurred during the upload.";console.error($),t.uploadState=N.ERROR,t.error=new Error($),B(t.error)},h.onloadend=()=>{P("item-upload-end",t,h)},h.send(c)}).catch(S=>(P("item-upload-fail",t,S),Promise.reject(S)))}const p=e.computed(()=>(y.value==null||C.value.length<Number(y.value))&&!b.value),m=e.computed(()=>C.value.filter(c=>c.uploadState===N.UPLOADING).length>0),E=e.computed(()=>(Array.isArray(d.value)?d.value:d.value.split(",")).map(t=>t.trim()).filter(t=>t.length>0).map(t=>t.indexOf("/")===-1&&t[0]==="."?t.substr(1):t)),b=e.computed(()=>M.value||k.value);e.watch(C,t=>{t.map(c=>{c.key=c.key||W()}),P("change",C)},{deep:!0}),e.watch(m,t=>{P(t?"uploading":"uploaded")});const I=e.computed(()=>C.value.reduce((t,c)=>(c.file&&(t+=c.file.size),t),0));return{id:l,accept:d,maxFiles:y,maxConcurrent:A,maxItemSize:D,disabled:M,readonly:k,uploadUrl:g,items:C,eventBus:x,canUpload:p,isUploading:m,acceptedTypes:E,isReadonly:b,totalSize:I,emits:P,on:H,openFileSelector:j,addFile:G,addItem:O,createItem:Y,deleteItem:a,uploadStart:i,stopItemUpload:Q,isImageItem:se,isImage:ie}}const Se={class:"vue-drag-uploader__wrapper vue-drag-uploader__items"},Me=e.defineComponent({__name:"MultiUploader",props:e.mergeModels({id:{},uploadUrl:{},placeholder:{},instance:{},options:{default:()=>({})}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:e.mergeModels(["update:modelValue","change","delete-item","uploading","uploaded","create-item","item-upload-start","item-upload-success","item-upload-fail","item-upload-end","item-upload-progress","invalid-file-type"],["update:modelValue"]),setup(s,{expose:r,emit:n}){const l=s,d=n,y=e.useModel(s,"modelValue"),A=e.ref(y.value);e.watch(y,()=>{A.value=y.value},{deep:!0});const D=e.useTemplateRef("uploader");l.options.dropzone=l.options.dropzone??D;const M=l.instance??ue(A,l.uploadUrl??"",l.options),{isReadonly:k,items:g}=M;e.watch(g,()=>{y.value=g.value},{deep:!0});const v=[];for(const _ in X){const R=M.on(_,(...V)=>{d(_,...V)});v.push(R)}return e.onUnmounted(()=>{v.forEach(_=>_())}),r({instance:M}),(_,R)=>(e.openBlock(),e.createElementBlock("div",{ref:"uploader",class:e.normalizeClass(["vue-drag-uploader",{"vue-drag-uploader--readonly":e.unref(k)}])},[e.renderSlot(_.$slots,"start",{items:e.unref(g),options:_.options,instance:e.reactive(e.unref(M))}),e.createElementVNode("div",Se,[e.renderSlot(_.$slots,"items",{items:e.unref(g),options:_.options,instance:e.reactive(e.unref(M))})]),e.renderSlot(_.$slots,"end",{items:e.unref(g),options:_.options,instance:e.reactive(e.unref(M))})],2))}}),be={key:1,class:"preview-img__body d-flex flex-column justify-content-center align-items-center gap-2"},De={style:{width:"calc(var(--vmu-img-size) / 3)",height:"calc(var(--vmu-img-size) / 3)"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},_e={style:{"word-break":"break-word"}},ke={class:"preview-img__overlay"},Oe={style:{width:"1rem",height:"1rem",fill:"white"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},Ie={key:2,class:"preview-img__progress"},Ae={class:"error-message__message"},Le=e.defineComponent({__name:"ItemCard",props:{item:{},i:{},size:{default:"150px"},isReadonly:{type:Boolean}},emits:["delete","item-click"],setup(s,{emit:r}){const n=s,l=r,d=e.computed(()=>n.item.uploadState),y=e.computed(()=>n.item.progress);function A(){n.isReadonly||l("delete",n.item)}const D=e.computed(()=>n.item.file?n.item.file.name:n.item.title?n.item.title:n.item.url.split("/").pop()),M=e.computed(()=>se(n.item));function k(g){l("item-click",n.item,n.i,g)}return(g,v)=>(e.openBlock(),e.createElementBlock("div",{class:"vue-drag-uploader-item preview-img",style:e.normalizeStyle({"--vmu-img-size":g.size}),onClick:k},[e.renderSlot(g.$slots,"it",{item:g.item},()=>{var _;return[M.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"preview-img__body",style:e.normalizeStyle({"background-image":"url("+(g.item.thumbUrl||g.item.url)+")",opacity:d.value===e.unref(N).UPLOADED?1:.5})},null,4)):e.createCommentVNode("",!0),M.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",be,[e.createElementVNode("div",null,[e.renderSlot(g.$slots,"icon",{item:g.item},()=>[(e.openBlock(),e.createElementBlock("svg",De,v[2]||(v[2]=[e.createElementVNode("path",{d:"M320 464c8.8 0 16-7.2 16-16l0-288-80 0c-17.7 0-32-14.3-32-32l0-80L64 48c-8.8 0-16 7.2-16 16l0 384c0 8.8 7.2 16 16 16l256 0zM0 64C0 28.7 28.7 0 64 0L229.5 0c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64z"},null,-1)])))])]),e.createElementVNode("div",_e,e.toDisplayString(D.value),1)])),e.createElementVNode("div",ke,[g.isReadonly?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("span",{key:0,class:"preview-img__remove-icon",onClick:v[0]||(v[0]=e.withModifiers(R=>A(),["prevent","stop"]))},[e.renderSlot(g.$slots,"remove-icon",{},()=>[(e.openBlock(),e.createElementBlock("svg",Oe,v[3]||(v[3]=[e.createElementVNode("path",{d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"},null,-1)])))])])),e.renderSlot(g.$slots,"extra",{item:g.item})]),d.value===e.unref(N).UPLOADING?(e.openBlock(),e.createElementBlock("div",Ie,[e.createElementVNode("div",{class:"preview-img__progress-bar",style:e.normalizeStyle({width:y.value*100+"%"})},null,4)])):e.createCommentVNode("",!0),d.value===e.unref(N).ERROR?(e.openBlock(),e.createElementBlock("div",{key:3,class:"preview-img__error-message error-message",onClick:v[1]||(v[1]=e.withModifiers(()=>{},["stop","prevent"]))},[v[4]||(v[4]=e.createElementVNode("span",{class:"error-message__notice"},"Upload fail",-1)),e.createElementVNode("span",Ae,e.toDisplayString((_=g.item.error)==null?void 0:_.message),1)])):e.createCommentVNode("",!0)]})],4))}}),Ne={class:"add-button__body"},Re={class:"add-button__icon"},Ue={style:{width:"32px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Ce={class:"add-button__text"},ze=e.defineComponent({__name:"ItemCardPlaceholder",props:{size:{default:"150px"},text:{default:""}},setup(s){return(r,n)=>(e.openBlock(),e.createElementBlock("div",{class:"vue-drag-uploader-item add-button",key:"empty",style:e.normalizeStyle({"--vmu-img-size":r.size})},[e.createElementVNode("div",Ne,[e.renderSlot(r.$slots,"default",{},()=>[e.createElementVNode("div",Re,[e.renderSlot(r.$slots,"icon",e.normalizeProps(e.guardReactiveProps({size:r.size})),()=>[(e.openBlock(),e.createElementBlock("svg",Ue,n[0]||(n[0]=[e.createElementVNode("path",{d:"M288 109.3L288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-242.7-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352l128 0c0 35.3 28.7 64 64 64s64-28.7 64-64l128 0c35.3 0 64 28.7 64 64l0 32c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64l0-32c0-35.3 28.7-64 64-64zM432 456a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"},null,-1)])))])]),e.createElementVNode("div",Ce,e.toDisplayString(r.text),1)])])],4))}});z.ItemCard=Le,z.ItemCardPlaceholder=ze,z.MultiUploader=Me,z.UploadState=N,z.createItem=Ee,z.handleEvents=oe,z.uploaderEvents=X,z.useMultiUploader=ue,Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})});
