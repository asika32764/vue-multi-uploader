(function(P,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(P=typeof globalThis<"u"?globalThis:P||self,e(P.VueMultiUploader={},P.Vue))})(this,function(P,e){"use strict";/*!
 * dush <https://github.com/tunnckoCore/dush>
 *
 * Copyright (c) Charlike Mike Reagent <@tunnckoCore> (https://i.am.charlike.online)
 * Released under the MIT license.
 */function le(){var i=Object.create(null),r={_allEvents:i,use:function(l,f){var w=l(r,f);return w||r},on:function(l,f,w){var L=r._allEvents[l]||(r._allEvents[l]=[]);function S(){r.off(l,S),f.apply(f,arguments)}S.fn=f;var M=w?S:f;return L.push(M),r},once:function(l,f){return r.on(l,f,!0),r},off:function(l,f){return f&&r._allEvents[l]?r._allEvents[l]=r._allEvents[l].filter(function(w){return w!==f&&w!==f.fn}):l?r._allEvents[l]=[]:r._allEvents=Object.create(null),r},emit:function(l){if(l!=="*"){var f=[].slice.call(arguments);(r._allEvents[l]||[]).map(function(w){w.apply(w,f.slice(1))}),(r._allEvents["*"]||[]).map(function(w){w.apply(w,f)})}return r}};return r}const K={change:"onChange","delete-item":"onDeleteItem",uploading:"onUploading",uploaded:"onUploaded","create-item":"onCreateItem","item-upload-start":"onItemUploadStart","item-upload-success":"onItemUploadSuccess","item-upload-fail":"onItemUploadFail","item-upload-end":"onItemUploadEnd","item-upload-progress":"onItemUploadProgress","invalid-file":"onInvalidFile"};function se(i){const r=le();for(const n in K){const l=K[n];l&&i[l]&&r.on(n,i[l])}return r}var R=(i=>(i.PENDING="pending",i.UPLOADING="uploading",i.UPLOADED="uploaded",i.ERROR="error",i))(R||{});class ue extends Error{constructor(r,n,l){super(r),this.file=n,this.accepted=l,this.name="InvalidFileTypeError"}}class ce extends Error{constructor(r,n,l){super(r),this.file=n,this.maxSize=l,this.name="InvalidFileSizeError"}}function de(i,r){const n=document.createElement("input");n.id="multi-uploader-selector",n.type="file",n.accept=i.value,n.multiple=!0,n.style.display="none",n.addEventListener("change",()=>{const l=n.files;r(l),n.remove()}),n.addEventListener("change",()=>{n.remove()}),n.addEventListener("blur",()=>{n.remove()}),document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}function fe(i,r,n){i.__dragging_events||(i.addEventListener("dragover",l=>{l.stopPropagation(),l.preventDefault(),i.classList.add(r.value)}),i.addEventListener("dragleave",l=>{l.stopPropagation(),l.preventDefault(),i.classList.remove(r.value)}),i.addEventListener("drop",async l=>{var M;l.stopPropagation(),l.preventDefault(),i.classList.remove(r.value);const f=(M=l.dataTransfer)==null?void 0:M.items,w=[],L=async O=>{const D=[];O.isDirectory?O.createReader().readEntries(v=>{v.forEach(N=>{D.push(L(N))})}):D.push(new Promise(y=>{O.file(v=>{w.push(v),y()})})),await Promise.all(D)},S=[];Array.prototype.forEach.call(f??[],O=>{const D=O.webkitGetAsEntry();D&&S.push(L(D))}),S.length&&Promise.all(S).then(()=>{n(w)})}),i.__dragging_events=!0)}const x=class x{};x.alert=async r=>window.alert(r),x.confirm=async r=>new Promise(n=>{const l=confirm(r);n(l)}),x.deleteConfirm=async r=>x.confirm(r),x.confirmText=()=>"確認",x.cancelText=()=>"取消",x.deleteText=()=>"刪除";let ie=x;function J(i="",r=!1){if(r){const l=(performance!=null&&performance.timeOrigin?Math.round(performance.timeOrigin):performance.timing.navigationStart)*1e5+performance.now()*100;return i+l.toString(12)+oe(4)}return i+oe(12)}function oe(i=12){const n=window.crypto;if(!n)return String(Math.floor(Math.random()*i**10));const l=new Uint8Array(i);for(let f=0;f<i;f+=65536)n.getRandomValues(l.subarray(f,f+Math.min(i-f,65536)));return Array.from(l).map(f=>f.toString(16).padStart(2,"0")).join("")}var pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},me={exports:{}};(function(i,r){(function(n,l){i.exports=l()})(pe,function(){var n=1e3,l=6e4,f=36e5,w="millisecond",L="second",S="minute",M="hour",O="day",D="week",y="month",v="quarter",N="year",B="date",X="Invalid Date",te=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ne={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(d){var a=["th","st","nd","rd"],s=d%100;return"["+d+(a[(s-20)%10]||a[s]||a[0])+"]"}},j=function(d,a,s){var u=String(d);return!u||u.length>=a?d:""+Array(a+1-u.length).join(s)+d},T={s:j,z:function(d){var a=-d.utcOffset(),s=Math.abs(a),u=Math.floor(s/60),o=s%60;return(a<=0?"+":"-")+j(u,2,"0")+":"+j(o,2,"0")},m:function d(a,s){if(a.date()<s.date())return-d(s,a);var u=12*(s.year()-a.year())+(s.month()-a.month()),o=a.clone().add(u,y),p=s-o<0,m=a.clone().add(u+(p?-1:1),y);return+(-(u+(s-o)/(p?o-m:m-o))||0)},a:function(d){return d<0?Math.ceil(d)||0:Math.floor(d)},p:function(d){return{M:y,y:N,w:D,d:O,D:B,h:M,m:S,s:L,ms:w,Q:v}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(d){return d===void 0}},G="en",H={};H[G]=ne;var re="$isDayjsObject",W=function(d){return d instanceof q||!(!d||!d[re])},Q=function d(a,s,u){var o;if(!a)return G;if(typeof a=="string"){var p=a.toLowerCase();H[p]&&(o=p),s&&(H[p]=s,o=p);var m=a.split("-");if(!o&&m.length>1)return d(m[0])}else{var E=a.name;H[E]=a,o=E}return!u&&o&&(G=o),o||!u&&G},I=function(d,a){if(W(d))return d.clone();var s=typeof a=="object"?a:{};return s.date=d,s.args=arguments,new q(s)},$=T;$.l=Q,$.i=W,$.w=function(d,a){return I(d,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var q=function(){function d(s){this.$L=Q(s.locale,null,!0),this.parse(s),this.$x=this.$x||s.x||{},this[re]=!0}var a=d.prototype;return a.parse=function(s){this.$d=function(u){var o=u.date,p=u.utc;if(o===null)return new Date(NaN);if($.u(o))return new Date;if(o instanceof Date)return new Date(o);if(typeof o=="string"&&!/Z$/i.test(o)){var m=o.match(te);if(m){var E=m[2]-1||0,b=(m[7]||"0").substring(0,3);return p?new Date(Date.UTC(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,b)):new Date(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,b)}}return new Date(o)}(s),this.init()},a.init=function(){var s=this.$d;this.$y=s.getFullYear(),this.$M=s.getMonth(),this.$D=s.getDate(),this.$W=s.getDay(),this.$H=s.getHours(),this.$m=s.getMinutes(),this.$s=s.getSeconds(),this.$ms=s.getMilliseconds()},a.$utils=function(){return $},a.isValid=function(){return this.$d.toString()!==X},a.isSame=function(s,u){var o=I(s);return this.startOf(u)<=o&&o<=this.endOf(u)},a.isAfter=function(s,u){return I(s)<this.startOf(u)},a.isBefore=function(s,u){return this.endOf(u)<I(s)},a.$g=function(s,u,o){return $.u(s)?this[u]:this.set(o,s)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(s,u){var o=this,p=!!$.u(u)||u,m=$.p(s),E=function(_,g){var F=$.w(o.$u?Date.UTC(o.$y,g,_):new Date(o.$y,g,_),o);return p?F:F.endOf(O)},b=function(_,g){return $.w(o.toDate()[_].apply(o.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice(g)),o)},A=this.$W,C=this.$M,V=this.$D,t="set"+(this.$u?"UTC":"");switch(m){case N:return p?E(1,0):E(31,11);case y:return p?E(1,C):E(0,C+1);case D:var c=this.$locale().weekStart||0,h=(A<c?A+7:A)-c;return E(p?V-h:V+(6-h),C);case O:case B:return b(t+"Hours",0);case M:return b(t+"Minutes",1);case S:return b(t+"Seconds",2);case L:return b(t+"Milliseconds",3);default:return this.clone()}},a.endOf=function(s){return this.startOf(s,!1)},a.$set=function(s,u){var o,p=$.p(s),m="set"+(this.$u?"UTC":""),E=(o={},o[O]=m+"Date",o[B]=m+"Date",o[y]=m+"Month",o[N]=m+"FullYear",o[M]=m+"Hours",o[S]=m+"Minutes",o[L]=m+"Seconds",o[w]=m+"Milliseconds",o)[p],b=p===O?this.$D+(u-this.$W):u;if(p===y||p===N){var A=this.clone().set(B,1);A.$d[E](b),A.init(),this.$d=A.set(B,Math.min(this.$D,A.daysInMonth())).$d}else E&&this.$d[E](b);return this.init(),this},a.set=function(s,u){return this.clone().$set(s,u)},a.get=function(s){return this[$.p(s)]()},a.add=function(s,u){var o,p=this;s=Number(s);var m=$.p(u),E=function(C){var V=I(p);return $.w(V.date(V.date()+Math.round(C*s)),p)};if(m===y)return this.set(y,this.$M+s);if(m===N)return this.set(N,this.$y+s);if(m===O)return E(1);if(m===D)return E(7);var b=(o={},o[S]=l,o[M]=f,o[L]=n,o)[m]||1,A=this.$d.getTime()+s*b;return $.w(A,this)},a.subtract=function(s,u){return this.add(-1*s,u)},a.format=function(s){var u=this,o=this.$locale();if(!this.isValid())return o.invalidDate||X;var p=s||"YYYY-MM-DDTHH:mm:ssZ",m=$.z(this),E=this.$H,b=this.$m,A=this.$M,C=o.weekdays,V=o.months,t=o.meridiem,c=function(g,F,k,Y){return g&&(g[F]||g(u,p))||k[F].slice(0,Y)},h=function(g){return $.s(E%12||12,g,"0")},_=t||function(g,F,k){var Y=g<12?"AM":"PM";return k?Y.toLowerCase():Y};return p.replace(z,function(g,F){return F||function(k){switch(k){case"YY":return String(u.$y).slice(-2);case"YYYY":return $.s(u.$y,4,"0");case"M":return A+1;case"MM":return $.s(A+1,2,"0");case"MMM":return c(o.monthsShort,A,V,3);case"MMMM":return c(V,A);case"D":return u.$D;case"DD":return $.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return c(o.weekdaysMin,u.$W,C,2);case"ddd":return c(o.weekdaysShort,u.$W,C,3);case"dddd":return C[u.$W];case"H":return String(E);case"HH":return $.s(E,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return _(E,b,!0);case"A":return _(E,b,!1);case"m":return String(b);case"mm":return $.s(b,2,"0");case"s":return String(u.$s);case"ss":return $.s(u.$s,2,"0");case"SSS":return $.s(u.$ms,3,"0");case"Z":return m}return null}(g)||m.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(s,u,o){var p,m=this,E=$.p(u),b=I(s),A=(b.utcOffset()-this.utcOffset())*l,C=this-b,V=function(){return $.m(m,b)};switch(E){case N:p=V()/12;break;case y:p=V();break;case v:p=V()/3;break;case D:p=(C-A)/6048e5;break;case O:p=(C-A)/864e5;break;case M:p=C/f;break;case S:p=C/l;break;case L:p=C/n;break;default:p=C}return o?p:$.a(p)},a.daysInMonth=function(){return this.endOf(y).$D},a.$locale=function(){return H[this.$L]},a.locale=function(s,u){if(!s)return this.$L;var o=this.clone(),p=Q(s,u,!0);return p&&(o.$L=p),o},a.clone=function(){return $.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},d}(),Z=q.prototype;return I.prototype=Z,[["$ms",w],["$s",L],["$m",S],["$H",M],["$W",O],["$M",y],["$y",N],["$D",B]].forEach(function(d){Z[d[1]]=function(a){return this.$g(a,d[0],d[1])}}),I.extend=function(d,a){return d.$i||(d(a,q,I),d.$i=!0),I},I.locale=Q,I.isDayjs=W,I.unix=function(d){return I(1e3*d)},I.en=H[G],I.Ls=H,I.p={},I})})(me);class he{constructor(r=1){this.maxRunning=r,this.items=[],this.currentRunning=0,this.running=!1,this.observers=[]}push(r){const n=new Promise((l,f)=>{this.items.push(()=>Promise.resolve(r()).then(l))});return this.run(),n}run(){this.running||(this.running=!0),this.pop()}async pop(){const r=this.items.shift();if(!r)return this.running=!1,Promise.resolve();if(this.currentRunning>=this.maxRunning)return this.items.unshift(r),Promise.resolve();this.currentRunning++,this.notice();try{return await r()}catch(n){throw n}finally{this.endPop()}}endPop(){this.currentRunning--,this.notice(),this.pop()}clear(){return this.items=[],this.notice(),this}isEmpty(){return this.items.length===0}get length(){return this.items.length}peek(){return this.items}observe(r,n={}){return this.observers.push({handler:r,once:n.once||!1}),()=>{this.off(r)}}once(r,n={}){return n.once=!0,this.observe(r,n)}onEnd(r,n={}){return this.observe((l,f,w)=>{f===0&&w===0&&r(l,f,w)},n)}notice(){return this.observers.forEach(r=>{r.handler(this,this.length,this.currentRunning)}),this.observers=this.observers.filter(r=>!r.once),this}off(r){return r==null?(this.observers=[],this):(this.observers=this.observers.filter(n=>n.handler!==r),this)}}function ge(i=1){return new he(i)}function ye(){return ge()}function we(i){return i?"$el"in i?i.$el:i:null}function ee(i,r){return i.key??(i.key=J()),i.uploadState??(i.uploadState=R.PENDING),i.progress??(i.progress=0),r&&Object.assign(i,r),i}function ve(i){return ee(i)}function U(i){return typeof i=="function"&&(i=e.ref(i())),e.isRef(i)?i:e.ref(i)}function ae(i,r,n={}){const l=U(n.id??"vue-multi-uploader-"+J()),f=U(n.accept??""),w=U(n.maxFiles),L=U(n.maxConcurrent??2),S=U(n.maxItemSize),M=U(n.disabled??!1),O=U(n.readonly??!1),D=U(r),y=e.computed(()=>U(n.dropzone).value),v=U(n.onDragClass??"h-ondrag"),N=U(n.autoStart??!0),B=U(n.inputName??"file"),X=U(n.headers??{}),te=U(n.data??{});let z=U(i);z.value=z.value.map(t=>ee(t,{uploadState:R.UPLOADED}));const ne=ye(),j=se(n);e.watch(L,t=>{ne.maxRunning=t},{immediate:!0});function T(t,...c){return j.emit(t,...c)}function G(t,c){return j.on(t,c),()=>{j.off(t,c)}}function H(){de(f,$)}e.watch(y,()=>{const t=we(y.value);t&&t instanceof HTMLElement&&re(t)},{immediate:!0});function re(t){fe(t,v,$)}function W(t){return I(Q(t))}function Q(t){const h=e.reactive(ee({key:J(),url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",file:t,uploadState:R.PENDING,progress:0}));return h.title=h.title||h.file.name,j.emit("create-item",h),h}function I(t){const c=e.reactive(ee({key:J(),uploadState:R.PENDING,progress:0},t));if(!t.file)return t;if(Z(t.file),S.value!=null&&t.file.size>S.value){const g=new ce("File size is too large",t.file,S.value);throw T("invalid-file",g),g}const h=z.value.push(c),_=z.value[h-1];if(p(_)){const g=new FileReader;g.onload=F=>{var k;_.thumbUrl=String((k=F.target)==null?void 0:k.result)},g.readAsDataURL(t.file)}return _}function $(t){Array.prototype.forEach.call(t,Z),Array.prototype.forEach.call(t,c=>{if(!E.value)return;const h=W(c);N.value&&u(h)})}function q(t){var c;if(t instanceof XMLHttpRequest){t.abort();return}(c=t.xhr)==null||c.abort()}function Z(t){const c=A.value,h=t.name.split(".").pop();if(c.length){let _=!1;if(c.forEach(g=>{_||(g.indexOf("/")!==-1?d(g,t.type)&&(_=!0):g.toLowerCase()===(h==null?void 0:h.toLowerCase())&&(_=!0))}),!_){const g=new ue("Invalid file type",t,c);throw T("invalid-file",g),g}}}function d(t,c){const h=t.split("/"),_=c.split("/");return h[1]==="*"?h[0]===_[0]:t===c}function a(t){T("delete-item",t),z.value=z.value.filter(c=>c.key!==t.key)}async function s(){const t=[];return z.value.forEach(c=>{c.uploadState===R.PENDING&&t.push(u(c))}),Promise.allSettled(t)}async function u(t){return ne.push(()=>o(t))}async function o(t){t.uploadState=R.UPLOADING,t.error=void 0;const c=new FormData;for(const g in te.value)c.append(g,te.value[g]);c.append(B.value,t.file);let h=new XMLHttpRequest;h.open("POST",D.value);for(const g in X.value)h.setRequestHeader(g,X.value[g]);return n.prepareXhr&&(h=await n.prepareXhr(h)??h),new Promise((g,F)=>{T("item-upload-start",t,h,c),h.upload.onprogress=k=>{k.lengthComputable&&(t.progress=k.loaded/k.total,T("item-upload-progress",t,k))},h.onload=()=>{if(h.status>=200&&h.status<300)try{t.uploadState=R.UPLOADED,T("item-upload-success",t,h),g(t)}catch(k){console.error(k),t.uploadState=R.ERROR,t.error=k,F(k)}else{const k=`Upload failed with status: ${h.status}`,Y=new Error(k);console.error(Y),t.uploadState=R.ERROR,t.error=Y,F(Y)}},h.onerror=()=>{const k="An error occurred during the upload.";console.error(k),t.uploadState=R.ERROR,t.error=new Error(k),F(t.error)},h.onloadend=()=>{T("item-upload-end",t,h)},h.send(c)}).catch(g=>(T("item-upload-fail",t,g),Promise.reject(g)))}function p(t){return m(t.file?t.file.name:t.url)}function m(t){var _;const c=((_=t.split(".").pop())==null?void 0:_.split("?").shift())||"";return["png","jpeg","jpg","gif","bmp","webp"].indexOf(c.toLowerCase())!==-1}const E=e.computed(()=>(w.value==null||z.value.length<Number(w.value))&&!C.value),b=e.computed(()=>z.value.filter(c=>c.uploadState===R.UPLOADING).length>0),A=e.computed(()=>(Array.isArray(f.value)?f.value:f.value.split(",")).map(t=>t.trim()).filter(t=>t.length>0).map(t=>t.indexOf("/")===-1&&t[0]==="."?t.substr(1):t)),C=e.computed(()=>M.value||O.value);e.watch(z,t=>{t.map(c=>{c.key=c.key||J()}),T("change",z)},{deep:!0}),e.watch(b,t=>{T(t?"uploading":"uploaded")});const V=e.computed(()=>z.value.reduce((t,c)=>(c.file&&(t+=c.file.size),t),0));return{id:l,accept:f,maxFiles:w,maxConcurrent:L,maxItemSize:S,disabled:M,readonly:O,uploadUrl:D,items:z,eventBus:j,canUpload:E,isUploading:b,acceptedTypes:A,isReadonly:C,totalSize:V,emits:T,on:G,openFileSelector:H,addFile:W,addItem:I,createItem:Q,deleteItem:a,uploadStart:s,stopItemUpload:q,isImageItem:p,isImage:m}}const $e={class:"vue-drag-uploader__wrapper vue-drag-uploader__items"},Ee=e.defineComponent({__name:"MultiUploader",props:e.mergeModels({id:{},uploadUrl:{},placeholder:{},instance:{},options:{default:()=>({})}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:e.mergeModels(["update:modelValue","change","delete-item","uploading","uploaded","create-item","item-upload-start","item-upload-success","item-upload-fail","item-upload-end","item-upload-progress","invalid-file-type"],["update:modelValue"]),setup(i,{expose:r,emit:n}){const l=i,f=n,w=e.useModel(i,"modelValue"),L=e.ref(w.value);e.watch(w,()=>{L.value=w.value},{deep:!0});const S=e.useTemplateRef("el");l.options.dropzone=l.options.dropzone??S;const M=l.instance??ae(L,l.uploadUrl??"",l.options),{isReadonly:O,items:D}=M;e.watch(D,()=>{w.value=D.value},{deep:!0});const y=[];for(const v in K){const N=M.on(v,(...B)=>{f(v,...B)});y.push(N)}return e.onUnmounted(()=>{y.forEach(v=>v())}),r({instance:M}),(v,N)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"el",ref:S,class:e.normalizeClass(["vue-drag-uploader",{"vue-drag-uploader--readonly":e.unref(O)}])},[e.renderSlot(v.$slots,"start",{items:e.unref(D),options:v.options,instance:e.reactive(e.unref(M))}),e.createElementVNode("div",$e,[e.renderSlot(v.$slots,"items",{items:e.unref(D),options:v.options,instance:e.reactive(e.unref(M))})]),e.renderSlot(v.$slots,"end",{items:e.unref(D),options:v.options,instance:e.reactive(e.unref(M))})],2))}}),Se={key:1,class:"preview-img__body d-flex flex-column justify-content-center align-items-center gap-2"},Me={style:{width:"calc(var(--vmu-img-size) / 3)",height:"calc(var(--vmu-img-size) / 3)"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},be={style:{"word-break":"break-word"}},De={class:"preview-img__overlay"},_e={style:{width:"1rem",height:"1rem",fill:"white"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},ke={key:2,class:"preview-img__progress"},Oe={class:"error-message__message"},Ie=e.defineComponent({__name:"ItemCard",props:{item:{},i:{},size:{default:"150px"},isReadonly:{type:Boolean}},emits:["delete","item-click"],setup(i,{emit:r}){const n=i,l=r,f=e.computed(()=>n.item.uploadState),w=e.computed(()=>n.item.progress);function L(){n.isReadonly||l("delete",n.item)}const S=e.computed(()=>n.item.file?n.item.file.name:n.item.title?n.item.title:n.item.url.split("/").pop()),M=e.computed(()=>O(n.item.file?n.item.file.name:n.item.url));function O(y){var B;const v=((B=y.split(".").pop())==null?void 0:B.split("?").shift())||"";return["png","jpeg","jpg","gif","bmp","webp"].indexOf(v.toLowerCase())!==-1}function D(y){l("item-click",n.item,n.i,y)}return(y,v)=>(e.openBlock(),e.createElementBlock("div",{class:"vue-drag-uploader-item preview-img",style:e.normalizeStyle({"--vmu-img-size":y.size}),onClick:D},[e.renderSlot(y.$slots,"it",{item:y.item},()=>{var N;return[M.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"preview-img__body",style:e.normalizeStyle({"background-image":"url("+(y.item.thumbUrl||y.item.url)+")",opacity:f.value===e.unref(R).UPLOADED?1:.5})},null,4)):e.createCommentVNode("",!0),M.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Se,[e.createElementVNode("div",null,[e.renderSlot(y.$slots,"icon",{item:y.item},()=>[(e.openBlock(),e.createElementBlock("svg",Me,v[2]||(v[2]=[e.createElementVNode("path",{d:"M320 464c8.8 0 16-7.2 16-16l0-288-80 0c-17.7 0-32-14.3-32-32l0-80L64 48c-8.8 0-16 7.2-16 16l0 384c0 8.8 7.2 16 16 16l256 0zM0 64C0 28.7 28.7 0 64 0L229.5 0c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64z"},null,-1)])))])]),e.createElementVNode("div",be,e.toDisplayString(S.value),1)])),e.createElementVNode("div",De,[y.isReadonly?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("span",{key:0,class:"preview-img__remove-icon",onClick:v[0]||(v[0]=e.withModifiers(B=>L(),["prevent","stop"]))},[e.renderSlot(y.$slots,"remove-icon",{},()=>[(e.openBlock(),e.createElementBlock("svg",_e,v[3]||(v[3]=[e.createElementVNode("path",{d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"},null,-1)])))])])),e.renderSlot(y.$slots,"extra",{item:y.item})]),f.value===e.unref(R).UPLOADING?(e.openBlock(),e.createElementBlock("div",ke,[e.createElementVNode("div",{class:"preview-img__progress-bar",style:e.normalizeStyle({width:w.value*100+"%"})},null,4)])):e.createCommentVNode("",!0),f.value===e.unref(R).ERROR?(e.openBlock(),e.createElementBlock("div",{key:3,class:"preview-img__error-message error-message",onClick:v[1]||(v[1]=e.withModifiers(()=>{},["stop","prevent"]))},[v[4]||(v[4]=e.createElementVNode("span",{class:"error-message__notice"},"Upload fail",-1)),e.createElementVNode("span",Oe,e.toDisplayString((N=y.item.error)==null?void 0:N.message),1)])):e.createCommentVNode("",!0)]})],4))}}),Ae={class:"add-button__body"},Le={class:"add-button__icon"},Ne={style:{width:"32px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Ce={class:"add-button__text"},Re=e.defineComponent({__name:"ItemCardPlaceholder",props:{size:{default:"150px"},text:{default:""}},setup(i){return(r,n)=>(e.openBlock(),e.createElementBlock("div",{class:"vue-drag-uploader-item add-button",key:"empty",style:e.normalizeStyle({"--vmu-img-size":r.size})},[e.createElementVNode("div",Ae,[e.renderSlot(r.$slots,"default",{},()=>[e.createElementVNode("div",Le,[e.renderSlot(r.$slots,"icon",e.normalizeProps(e.guardReactiveProps({size:r.size})),()=>[(e.openBlock(),e.createElementBlock("svg",Ne,n[0]||(n[0]=[e.createElementVNode("path",{d:"M288 109.3L288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-242.7-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352l128 0c0 35.3 28.7 64 64 64s64-28.7 64-64l128 0c35.3 0 64 28.7 64 64l0 32c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64l0-32c0-35.3 28.7-64 64-64zM432 456a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"},null,-1)])))])]),e.createElementVNode("div",Ce,e.toDisplayString(r.text),1)])])],4))}});P.ItemCard=Ie,P.ItemCardPlaceholder=Re,P.MultiUploader=Ee,P.UploadState=R,P.createItem=ve,P.handleEvents=se,P.uploaderEvents=K,P.useMultiUploader=ae,Object.defineProperty(P,Symbol.toStringTag,{value:"Module"})});
