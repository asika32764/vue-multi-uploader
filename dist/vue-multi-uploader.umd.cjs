(function(z,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(z=typeof globalThis<"u"?globalThis:z||self,t(z.VueMultiUploader={},z.Vue))})(this,function(z,t){"use strict";/*!
 * dush <https://github.com/tunnckoCore/dush>
 *
 * Copyright (c) Charlike Mike Reagent <@tunnckoCore> (https://i.am.charlike.online)
 * Released under the MIT license.
 */function le(){var o=Object.create(null),r={_allEvents:o,use:function(l,f){var y=l(r,f);return y||r},on:function(l,f,y){var L=r._allEvents[l]||(r._allEvents[l]=[]);function M(){r.off(l,M),f.apply(f,arguments)}M.fn=f;var D=y?M:f;return L.push(D),r},once:function(l,f){return r.on(l,f,!0),r},off:function(l,f){return f&&r._allEvents[l]?r._allEvents[l]=r._allEvents[l].filter(function(y){return y!==f&&y!==f.fn}):l?r._allEvents[l]=[]:r._allEvents=Object.create(null),r},emit:function(l){if(l!=="*"){var f=[].slice.call(arguments);(r._allEvents[l]||[]).map(function(y){y.apply(y,f.slice(1))}),(r._allEvents["*"]||[]).map(function(y){y.apply(y,f)})}return r}};return r}const Z={change:"onChange","delete-item":"onDeleteItem",uploading:"onUploading",uploaded:"onUploaded","create-item":"onCreateItem","item-upload-start":"onItemUploadStart","item-upload-success":"onItemUploadSuccess","item-upload-fail":"onItemUploadFail","item-upload-end":"onItemUploadEnd","item-upload-progress":"onItemUploadProgress","invalid-file":"onInvalidFile"};function se(o){const r=le();for(const n in Z){const l=Z[n];l&&o[l]&&r.on(n,o[l])}return r}var N=(o=>(o.PENDING="pending",o.UPLOADING="uploading",o.UPLOADED="uploaded",o.ERROR="error",o))(N||{});class ue extends Error{constructor(r,n,l){super(r),this.file=n,this.accepted=l,this.name="InvalidFileTypeError"}}class ce extends Error{constructor(r,n,l){super(r),this.file=n,this.maxSize=l,this.name="InvalidFileSizeError"}}function de(o,r){const n=document.createElement("input");n.id="multi-uploader-selector",n.type="file",n.accept=o.value,n.multiple=!0,n.style.display="none",n.addEventListener("change",()=>{const l=n.files;r(l),n.remove()}),n.addEventListener("change",()=>{n.remove()}),n.addEventListener("blur",()=>{n.remove()}),document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}function fe(o,r,n){o.__dragging_events||(o.addEventListener("dragover",l=>{l.stopPropagation(),l.preventDefault(),o.classList.add(r.value)}),o.addEventListener("dragleave",l=>{l.stopPropagation(),l.preventDefault(),o.classList.remove(r.value)}),o.addEventListener("drop",async l=>{var D;l.stopPropagation(),l.preventDefault(),o.classList.remove(r.value);const f=(D=l.dataTransfer)==null?void 0:D.items,y=[],L=async O=>{const A=[];O.isDirectory?O.createReader().readEntries($=>{$.forEach(C=>{A.push(L(C))})}):A.push(new Promise(h=>{O.file($=>{y.push($),h()})})),await Promise.all(A)},M=[];Array.prototype.forEach.call(f??[],O=>{const A=O.webkitGetAsEntry();A&&M.push(L(A))}),M.length&&Promise.all(M).then(()=>{n(y)})}),o.__dragging_events=!0)}const V=class V{};V.alert=async r=>window.alert(r),V.confirm=async r=>new Promise(n=>{const l=confirm(r);n(l)}),V.deleteConfirm=async r=>V.confirm(r),V.confirmText=()=>"確認",V.cancelText=()=>"取消",V.deleteText=()=>"刪除";let ie=V;function Q(o="",r=!1){if(r){const l=(performance!=null&&performance.timeOrigin?Math.round(performance.timeOrigin):performance.timing.navigationStart)*1e5+performance.now()*100;return o+l.toString(12)+oe(4)}return o+oe(12)}function oe(o=12){const n=window.crypto;if(!n)return String(Math.floor(Math.random()*o**10));const l=new Uint8Array(o);for(let f=0;f<o;f+=65536)n.getRandomValues(l.subarray(f,f+Math.min(o-f,65536)));return Array.from(l).map(f=>f.toString(16).padStart(2,"0")).join("")}var pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},me={exports:{}};(function(o,r){(function(n,l){o.exports=l()})(pe,function(){var n=1e3,l=6e4,f=36e5,y="millisecond",L="second",M="minute",D="hour",O="day",A="week",h="month",$="quarter",C="year",S="date",K="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ne={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(d){var a=["th","st","nd","rd"],s=d%100;return"["+d+(a[(s-20)%10]||a[s]||a[0])+"]"}},W=function(d,a,s){var u=String(d);return!u||u.length>=a?d:""+Array(a+1-u.length).join(s)+d},re={s:W,z:function(d){var a=-d.utcOffset(),s=Math.abs(a),u=Math.floor(s/60),i=s%60;return(a<=0?"+":"-")+W(u,2,"0")+":"+W(i,2,"0")},m:function d(a,s){if(a.date()<s.date())return-d(s,a);var u=12*(s.year()-a.year())+(s.month()-a.month()),i=a.clone().add(u,h),p=s-i<0,m=a.clone().add(u+(p?-1:1),h);return+(-(u+(s-i)/(p?i-m:m-i))||0)},a:function(d){return d<0?Math.ceil(d)||0:Math.floor(d)},p:function(d){return{M:h,y:C,w:A,d:O,D:S,h:D,m:M,s:L,ms:y,Q:$}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(d){return d===void 0}},x="en",T={};T[x]=ne;var q="$isDayjsObject",H=function(d){return d instanceof G||!(!d||!d[q])},Y=function d(a,s,u){var i;if(!a)return x;if(typeof a=="string"){var p=a.toLowerCase();T[p]&&(i=p),s&&(T[p]=s,i=p);var m=a.split("-");if(!i&&m.length>1)return d(m[0])}else{var E=a.name;T[E]=a,i=E}return!u&&i&&(x=i),i||!u&&x},I=function(d,a){if(H(d))return d.clone();var s=typeof a=="object"?a:{};return s.date=d,s.args=arguments,new G(s)},v=re;v.l=Y,v.i=H,v.w=function(d,a){return I(d,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var G=function(){function d(s){this.$L=Y(s.locale,null,!0),this.parse(s),this.$x=this.$x||s.x||{},this[q]=!0}var a=d.prototype;return a.parse=function(s){this.$d=function(u){var i=u.date,p=u.utc;if(i===null)return new Date(NaN);if(v.u(i))return new Date;if(i instanceof Date)return new Date(i);if(typeof i=="string"&&!/Z$/i.test(i)){var m=i.match(j);if(m){var E=m[2]-1||0,e=(m[7]||"0").substring(0,3);return p?new Date(Date.UTC(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,e)):new Date(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,e)}}return new Date(i)}(s),this.init()},a.init=function(){var s=this.$d;this.$y=s.getFullYear(),this.$M=s.getMonth(),this.$D=s.getDate(),this.$W=s.getDay(),this.$H=s.getHours(),this.$m=s.getMinutes(),this.$s=s.getSeconds(),this.$ms=s.getMilliseconds()},a.$utils=function(){return v},a.isValid=function(){return this.$d.toString()!==K},a.isSame=function(s,u){var i=I(s);return this.startOf(u)<=i&&i<=this.endOf(u)},a.isAfter=function(s,u){return I(s)<this.startOf(u)},a.isBefore=function(s,u){return this.endOf(u)<I(s)},a.$g=function(s,u,i){return v.u(s)?this[u]:this.set(i,s)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(s,u){var i=this,p=!!v.u(u)||u,m=v.p(s),E=function(B,U){var F=v.w(i.$u?Date.UTC(i.$y,U,B):new Date(i.$y,U,B),i);return p?F:F.endOf(O)},e=function(B,U){return v.w(i.toDate()[B].apply(i.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice(U)),i)},c=this.$W,g=this.$M,w=this.$D,b="set"+(this.$u?"UTC":"");switch(m){case C:return p?E(1,0):E(31,11);case h:return p?E(1,g):E(0,g+1);case A:var _=this.$locale().weekStart||0,k=(c<_?c+7:c)-_;return E(p?w-k:w+(6-k),g);case O:case S:return e(b+"Hours",0);case D:return e(b+"Minutes",1);case M:return e(b+"Seconds",2);case L:return e(b+"Milliseconds",3);default:return this.clone()}},a.endOf=function(s){return this.startOf(s,!1)},a.$set=function(s,u){var i,p=v.p(s),m="set"+(this.$u?"UTC":""),E=(i={},i[O]=m+"Date",i[S]=m+"Date",i[h]=m+"Month",i[C]=m+"FullYear",i[D]=m+"Hours",i[M]=m+"Minutes",i[L]=m+"Seconds",i[y]=m+"Milliseconds",i)[p],e=p===O?this.$D+(u-this.$W):u;if(p===h||p===C){var c=this.clone().set(S,1);c.$d[E](e),c.init(),this.$d=c.set(S,Math.min(this.$D,c.daysInMonth())).$d}else E&&this.$d[E](e);return this.init(),this},a.set=function(s,u){return this.clone().$set(s,u)},a.get=function(s){return this[v.p(s)]()},a.add=function(s,u){var i,p=this;s=Number(s);var m=v.p(u),E=function(g){var w=I(p);return v.w(w.date(w.date()+Math.round(g*s)),p)};if(m===h)return this.set(h,this.$M+s);if(m===C)return this.set(C,this.$y+s);if(m===O)return E(1);if(m===A)return E(7);var e=(i={},i[M]=l,i[D]=f,i[L]=n,i)[m]||1,c=this.$d.getTime()+s*e;return v.w(c,this)},a.subtract=function(s,u){return this.add(-1*s,u)},a.format=function(s){var u=this,i=this.$locale();if(!this.isValid())return i.invalidDate||K;var p=s||"YYYY-MM-DDTHH:mm:ssZ",m=v.z(this),E=this.$H,e=this.$m,c=this.$M,g=i.weekdays,w=i.months,b=i.meridiem,_=function(U,F,J,ee){return U&&(U[F]||U(u,p))||J[F].slice(0,ee)},k=function(U){return v.s(E%12||12,U,"0")},B=b||function(U,F,J){var ee=U<12?"AM":"PM";return J?ee.toLowerCase():ee};return p.replace(R,function(U,F){return F||function(J){switch(J){case"YY":return String(u.$y).slice(-2);case"YYYY":return v.s(u.$y,4,"0");case"M":return c+1;case"MM":return v.s(c+1,2,"0");case"MMM":return _(i.monthsShort,c,w,3);case"MMMM":return _(w,c);case"D":return u.$D;case"DD":return v.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return _(i.weekdaysMin,u.$W,g,2);case"ddd":return _(i.weekdaysShort,u.$W,g,3);case"dddd":return g[u.$W];case"H":return String(E);case"HH":return v.s(E,2,"0");case"h":return k(1);case"hh":return k(2);case"a":return B(E,e,!0);case"A":return B(E,e,!1);case"m":return String(e);case"mm":return v.s(e,2,"0");case"s":return String(u.$s);case"ss":return v.s(u.$s,2,"0");case"SSS":return v.s(u.$ms,3,"0");case"Z":return m}return null}(U)||m.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(s,u,i){var p,m=this,E=v.p(u),e=I(s),c=(e.utcOffset()-this.utcOffset())*l,g=this-e,w=function(){return v.m(m,e)};switch(E){case C:p=w()/12;break;case h:p=w();break;case $:p=w()/3;break;case A:p=(g-c)/6048e5;break;case O:p=(g-c)/864e5;break;case D:p=g/f;break;case M:p=g/l;break;case L:p=g/n;break;default:p=g}return i?p:v.a(p)},a.daysInMonth=function(){return this.endOf(h).$D},a.$locale=function(){return T[this.$L]},a.locale=function(s,u){if(!s)return this.$L;var i=this.clone(),p=Y(s,u,!0);return p&&(i.$L=p),i},a.clone=function(){return v.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},d}(),X=G.prototype;return I.prototype=X,[["$ms",y],["$s",L],["$m",M],["$H",D],["$W",O],["$M",h],["$y",C],["$D",S]].forEach(function(d){X[d[1]]=function(a){return this.$g(a,d[0],d[1])}}),I.extend=function(d,a){return d.$i||(d(a,G,I),d.$i=!0),I},I.locale=Y,I.isDayjs=H,I.unix=function(d){return I(1e3*d)},I.en=T[x],I.Ls=T,I.p={},I})})(me);class he{constructor(r=1){this.maxRunning=r,this.items=[],this.currentRunning=0,this.running=!1,this.observers=[]}push(r){const n=new Promise((l,f)=>{this.items.push(()=>Promise.resolve(r()).then(l))});return this.run(),n}run(){this.running||(this.running=!0),this.pop()}async pop(){const r=this.items.shift();if(!r)return this.running=!1,Promise.resolve();if(this.currentRunning>=this.maxRunning)return this.items.unshift(r),Promise.resolve();this.currentRunning++,this.notice();try{return await r()}catch(n){throw n}finally{this.endPop()}}endPop(){this.currentRunning--,this.notice(),this.pop()}clear(){return this.items=[],this.notice(),this}isEmpty(){return this.items.length===0}get length(){return this.items.length}peek(){return this.items}observe(r,n={}){return this.observers.push({handler:r,once:n.once||!1}),()=>{this.off(r)}}once(r,n={}){return n.once=!0,this.observe(r,n)}onEnd(r,n={}){return this.observe((l,f,y)=>{f===0&&y===0&&r(l,f,y)},n)}notice(){return this.observers.forEach(r=>{r.handler(this,this.length,this.currentRunning)}),this.observers=this.observers.filter(r=>!r.once),this}off(r){return r==null?(this.observers=[],this):(this.observers=this.observers.filter(n=>n.handler!==r),this)}}function ge(o=1){return new he(o)}function ye(){return ge()}function we(o){return o?"$el"in o?o.$el:o:null}function te(o,r){return o.key??(o.key=Q()),o.uploadState??(o.uploadState=N.PENDING),o.progress??(o.progress=0),r&&Object.assign(o,r),o}function P(o){return typeof o=="function"&&(o=t.ref(o())),t.isRef(o)?o:t.ref(o)}function ae(o,r,n={}){const l=P(n.id??"vue-multi-uploader-"+Q()),f=P(n.accept??""),y=P(n.maxFiles),L=P(n.maxConcurrent??2),M=P(n.maxItemSize),D=P(n.disabled??!1),O=P(n.readonly??!1),A=P(r),h=t.computed(()=>P(n.dropzone).value),$=P(n.onDragClass??"h-ondrag"),C=P(n.autoStart??!0);let S=P(o);S.value=S.value.map(e=>te(e,{uploadState:N.UPLOADED}));const K=ye(),j=se(n);t.watch(L,e=>{K.maxRunning=e},{immediate:!0});function R(e,...c){return j.emit(e,...c)}function ne(e,c){return j.on(e,c),()=>{j.off(e,c)}}function W(){de(f,H)}t.watch(h,()=>{const e=we(h.value);e&&e instanceof HTMLElement&&re(e)},{immediate:!0});function re(e){fe(e,$,H)}function x(e){return q(T(e))}function T(e){const g=t.reactive(te({key:Q(),url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",file:e,uploadState:N.PENDING,progress:0}));return g.title=g.title||g.file.name,j.emit("create-item",g),g}function q(e){const c=t.reactive(te({key:Q(),uploadState:N.PENDING,progress:0},e));if(!e.file)return e;if(I(e.file),M.value!=null&&e.file.size>M.value){const b=new ce("File size is too large",e.file,M.value);throw R("invalid-file",b),b}const g=S.value.push(c),w=S.value[g-1];if(a(w)){const b=new FileReader;b.onload=_=>{var k;w.thumbUrl=String((k=_.target)==null?void 0:k.result)},b.readAsDataURL(e.file)}return w}function H(e){Array.prototype.forEach.call(e,I),Array.prototype.forEach.call(e,c=>{if(!u.value)return;const g=x(c);C.value&&d(g)})}function Y(e){var c;if(e instanceof XMLHttpRequest){e.abort();return}(c=e.xhr)==null||c.abort()}function I(e){const c=p.value,g=e.name.split(".").pop();if(c.length){let w=!1;if(c.forEach(b=>{w||(b.indexOf("/")!==-1?v(b,e.type)&&(w=!0):b.toLowerCase()===(g==null?void 0:g.toLowerCase())&&(w=!0))}),!w){const b=new ue("Invalid file type",e,c);throw R("invalid-file",b),b}}}function v(e,c){const g=e.split("/"),w=c.split("/");return g[1]==="*"?g[0]===w[0]:e===c}function G(e){R("delete-item",e),S.value=S.value.filter(c=>c.key!==e.key)}async function X(){const e=[];return S.value.forEach(c=>{c.uploadState===N.PENDING&&e.push(d(c))}),Promise.allSettled(e)}async function d(e){e.uploadState=N.UPLOADING,e.error=void 0;const c=new FormData;return c.append("file",e.file),new Promise((w,b)=>{const _=new XMLHttpRequest;R("item-upload-start",e,_),_.open("POST",A.value),_.upload.onprogress=k=>{k.lengthComputable&&(e.progress=k.loaded/k.total,R("item-upload-progress",e,k))},_.onload=()=>{if(_.status>=200&&_.status<300)try{e.uploadState=N.UPLOADED,R("item-upload-success",e,_),w(e)}catch(k){console.error(k),e.uploadState=N.ERROR,e.error=k,b(k)}else{const k=`Upload failed with status: ${_.status}`,B=new Error(k);console.error(B),e.uploadState=N.ERROR,e.error=B,b(B)}},_.onerror=()=>{const k="An error occurred during the upload.";console.error(k),e.uploadState=N.ERROR,e.error=new Error(k),b(e.error)},_.onloadend=()=>{R("item-upload-end",e,_)},_.send(c)}).catch(w=>(R("item-upload-fail",e,w),Promise.reject(w)))}function a(e){return s(e.file?e.file.name:e.url)}function s(e){var w;const c=((w=e.split(".").pop())==null?void 0:w.split("?").shift())||"";return["png","jpeg","jpg","gif","bmp","webp"].indexOf(c.toLowerCase())!==-1}const u=t.computed(()=>(y.value==null||S.value.length<Number(y.value))&&!m.value),i=t.computed(()=>S.value.filter(c=>c.uploadState===N.UPLOADING).length>0),p=t.computed(()=>(Array.isArray(f.value)?f.value:f.value.split(",")).map(e=>e.trim()).filter(e=>e.length>0).map(e=>e.indexOf("/")===-1&&e[0]==="."?e.substr(1):e)),m=t.computed(()=>D.value||O.value);t.watch(S,e=>{e.map(c=>{c.key=c.key||Q()}),R("change",S)},{deep:!0}),t.watch(i,e=>{R(e?"uploading":"uploaded")});const E=t.computed(()=>S.value.reduce((e,c)=>(c.file&&(e+=c.file.size),e),0));return{id:l,accept:f,maxFiles:y,maxConcurrent:L,maxItemSize:M,disabled:D,readonly:O,uploadUrl:A,items:S,eventBus:j,canUpload:u,isUploading:i,acceptedTypes:p,isReadonly:m,totalSize:E,emits:R,on:ne,openFileSelector:W,addFile:x,addItem:q,createItem:T,deleteItem:G,uploadStart:X,stopItemUpload:Y,isImageItem:a,isImage:s}}const ve={class:"vue-drag-uploader__wrapper"},$e=t.defineComponent({__name:"MultiUploader",props:t.mergeModels({id:{},uploadUrl:{},placeholder:{},instance:{},options:{default:()=>({})}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:t.mergeModels(["update:modelValue","change","delete-item","uploading","uploaded","create-item","item-upload-start","item-upload-success","item-upload-fail","item-upload-end","item-upload-progress","invalid-file-type"],["update:modelValue"]),setup(o,{expose:r,emit:n}){const l=o,f=n,y=t.useModel(o,"modelValue"),L=t.ref(y.value);t.watch(y,()=>{L.value=y.value},{deep:!0});const M=t.useTemplateRef("el");l.options.dropzone=l.options.dropzone??M;const D=l.instance??ae(L,l.uploadUrl??"",l.options),{isReadonly:O,items:A}=D;t.watch(A,()=>{y.value=A.value},{deep:!0});const h=[];for(const $ in Z){const C=D.on($,(...S)=>{f($,...S)});h.push(C)}return t.onUnmounted(()=>{h.forEach($=>$())}),r({instance:D}),($,C)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"el",ref:M,class:t.normalizeClass(["vue-drag-uploader",{"vue-drag-uploader--readonly":t.unref(O)}])},[t.createElementVNode("div",ve,[t.renderSlot($.$slots,"items",{items:t.unref(A),options:$.options,instance:t.reactive(t.unref(D))})])],2))}}),Ee={key:1,class:"preview-img__body d-flex flex-column justify-content-center align-items-center gap-2"},Se={style:{width:"calc(var(--vmu-img-size) / 3)",height:"calc(var(--vmu-img-size) / 3)"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},Me={style:{"word-break":"break-word"}},be={class:"preview-img__overlay"},De={style:{width:"1rem",height:"1rem",fill:"white"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},_e={key:2,class:"preview-img__progress"},ke={class:"error-message__message"},Oe=t.defineComponent({__name:"ItemCard",props:{item:{},i:{},size:{default:"150px"},isReadonly:{type:Boolean}},emits:["delete","item-click"],setup(o,{emit:r}){const n=o,l=r,f=t.computed(()=>n.item.uploadState),y=t.computed(()=>n.item.progress);function L(){n.isReadonly||l("delete",n.item)}const M=t.computed(()=>n.item.file?n.item.file.name:n.item.title?n.item.title:n.item.url.split("/").pop()),D=t.computed(()=>O(n.item.file?n.item.file.name:n.item.url));function O(h){var S;const $=((S=h.split(".").pop())==null?void 0:S.split("?").shift())||"";return["png","jpeg","jpg","gif","bmp","webp"].indexOf($.toLowerCase())!==-1}function A(h){l("item-click",n.item,n.i,h)}return(h,$)=>(t.openBlock(),t.createElementBlock("div",{class:"vue-drag-uploader-item preview-img",style:t.normalizeStyle({"--vmu-img-size":h.size}),onClick:A},[t.renderSlot(h.$slots,"it",{item:h.item},()=>{var C;return[D.value?(t.openBlock(),t.createElementBlock("div",{key:0,class:"preview-img__body",style:t.normalizeStyle({"background-image":"url("+(h.item.thumbUrl||h.item.url)+")",opacity:f.value===t.unref(N).UPLOADED?1:.5})},null,4)):t.createCommentVNode("",!0),D.value?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",Ee,[t.createElementVNode("div",null,[t.renderSlot(h.$slots,"icon",{item:h.item},()=>[(t.openBlock(),t.createElementBlock("svg",Se,$[2]||($[2]=[t.createElementVNode("path",{d:"M320 464c8.8 0 16-7.2 16-16l0-288-80 0c-17.7 0-32-14.3-32-32l0-80L64 48c-8.8 0-16 7.2-16 16l0 384c0 8.8 7.2 16 16 16l256 0zM0 64C0 28.7 28.7 0 64 0L229.5 0c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64z"},null,-1)])))])]),t.createElementVNode("div",Me,t.toDisplayString(M.value),1)])),t.createElementVNode("div",be,[h.isReadonly?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("span",{key:0,class:"preview-img__remove-icon",onClick:$[0]||($[0]=t.withModifiers(S=>L(),["prevent"]))},[t.renderSlot(h.$slots,"remove-icon",{},()=>[(t.openBlock(),t.createElementBlock("svg",De,$[3]||($[3]=[t.createElementVNode("path",{d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"},null,-1)])))])])),t.renderSlot(h.$slots,"extra",{item:h.item})]),f.value===t.unref(N).UPLOADING?(t.openBlock(),t.createElementBlock("div",_e,[t.createElementVNode("div",{class:"preview-img__progress-bar",style:t.normalizeStyle({width:y.value*100+"%"})},null,4)])):t.createCommentVNode("",!0),f.value===t.unref(N).ERROR?(t.openBlock(),t.createElementBlock("div",{key:3,class:"preview-img__error-message error-message",onClick:$[1]||($[1]=t.withModifiers(()=>{},["stop","prevent"]))},[$[4]||($[4]=t.createElementVNode("span",{class:"error-message__notice"},"Upload fail",-1)),t.createElementVNode("span",ke,t.toDisplayString((C=h.item.error)==null?void 0:C.message),1)])):t.createCommentVNode("",!0)]})],4))}}),Ie={class:"add-button__body"},Ae={class:"add-button__icon"},Le={style:{width:"32px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Ce={class:"add-button__text"},Ne=t.defineComponent({__name:"ItemCardPlaceholder",props:{size:{default:"150px"},text:{default:""}},setup(o){return(r,n)=>(t.openBlock(),t.createElementBlock("div",{class:"vue-drag-uploader-item add-button",key:"empty",style:t.normalizeStyle({"--vmu-img-size":r.size})},[t.createElementVNode("div",Ie,[t.renderSlot(r.$slots,"default",{},()=>[t.createElementVNode("div",Ae,[t.renderSlot(r.$slots,"icon",t.normalizeProps(t.guardReactiveProps({size:r.size})),()=>[(t.openBlock(),t.createElementBlock("svg",Le,n[0]||(n[0]=[t.createElementVNode("path",{d:"M288 109.3L288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-242.7-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352l128 0c0 35.3 28.7 64 64 64s64-28.7 64-64l128 0c35.3 0 64 28.7 64 64l0 32c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64l0-32c0-35.3 28.7-64 64-64zM432 456a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"},null,-1)])))])]),t.createElementVNode("div",Ce,t.toDisplayString(r.text),1)])])],4))}});z.ItemCard=Oe,z.ItemCardPlaceholder=Ne,z.MultiUploader=$e,z.UploadState=N,z.handleEvents=se,z.uploaderEvents=Z,z.useMultiUploader=ae,Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})});
